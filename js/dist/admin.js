module.exports=function(t){var n={};function i(r){if(n[r])return n[r].exports;var e=n[r]={i:r,l:!1,exports:{}};return t[r].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=t,i.c=n,i.d=function(t,n,r){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var e in t)i.d(r,e,function(n){return t[n]}.bind(null,e));return r},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="",i(i.s=11)}([function(t,n){t.exports=flarum.core.compat.app},function(t,n){t.exports=flarum.core.compat["components/Button"]},function(t,n){t.exports=flarum.core.compat.Model},function(t,n){t.exports=flarum.core.compat.Component},function(t,n){t.exports=flarum.core.compat["utils/mixin"]},function(t,n){t.exports=flarum.core.compat["components/Dropdown"]},function(t,n){t.exports=flarum.core.compat.extend},function(t,n){t.exports=flarum.core.compat["components/AdminNav"]},function(t,n){t.exports=flarum.core.compat["components/AdminLinkButton"]},function(t,n){t.exports=flarum.core.compat["components/ExtensionsPage"]},function(t,n){t.exports=flarum.core.compat["utils/ItemList"]},function(t,n,i){"use strict";i.r(n);var r=i(0),e=i.n(r);function a(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var s=i(2),o=i.n(s),l=i(4),u=i.n(l),c=function(t){function n(){return t.apply(this,arguments)||this}return a(n,t),n}(u()(o.a,{key:o.a.attribute("key"),locales:o.a.attribute("locales")})),f=function(t){function n(){return t.apply(this,arguments)||this}return a(n,t),n.prototype.apiEndpoint=function(){return"/flagrow/linguist/strings"+(this.exists?"/"+this.data.id:"")},n}(u()(o.a,{key:o.a.attribute("key"),locale:o.a.attribute("locale"),value:o.a.attribute("value")})),g=i(6),h=i(7),p=i.n(h),d=i(8),y=i.n(d),w=i(3),v=i.n(w),b=i(1),k=i.n(b),x=i(5),O=i.n(x),L=i(9),F=i.n(L),T=function(){var t=[];for(var n in e.a.data.locales)e.a.data.locales.hasOwnProperty(n)&&t.push({key:n,name:e.a.data.locales[n]});return t},S=i(10),I=i.n(S),K=function(t,n){return n?t.replace(n,"<flagrow-highlight>"+n+"<flagrow-highlight>",t).split("<flagrow-highlight>").map(function(t){return t===n?m("span.Flagrow-Linguist-Highlight",t):t}):t},E=function(t){function n(){return t.apply(this,arguments)||this}a(n,t);var i=n.prototype;return i.init=function(){var t=this;this.stringKey=this.props.stringKey,this.locale=this.props.locale,this.localeKey=this.locale?this.locale.key:null,this.originalString=this.localeKey&&this.stringKey.locales().hasOwnProperty(this.localeKey)?this.stringKey.locales()[this.localeKey]:null,this.string=e.a.store.all("flagrow-linguist-string").find(function(n){return n.key()===t.stringKey.key()&&n.locale()===t.localeKey}),this.value=this.string?this.string.value():"",this.dirty=!1,this.processing=!1,this.inputType="input",(-1!==this.value.indexOf("\n")||this.originalString&&-1!==this.originalString.indexOf("\n"))&&(this.inputType="textarea")},i.view=function(){var t=this,n=this.originalString?this.originalString:"("+e.a.translator.trans("flagrow-linguist.admin.placeholder."+(this.localeKey?"not-translated":"all-locales"))+")";return m(".Flagrow-Linguist-Locale",[m("label.Flagrow-Linguist-Label",this.localeName()),m(".Flagrow-Linguist-Field",{className:(this.value?"Flagrow-Linguist-Field--with-value":"")+(this.originalString?" Flagrow-Linguist-Field--with-original-string":""),title:n},[m(".Flagrow-Linguist-Feld-Wrap",[m(this.inputType,{className:"FormControl Flagrow-Linguist-Input",value:this.value,oninput:m.withAttr("value",function(n){t.value=n,t.dirty=!0,t.value||t.string||(t.dirty=!1)}),disabled:this.processing}),m(".Flagrow-Linguist-Placeholder",[m("span.Flagrow-Linguist-Placeholder-Hint",e.a.translator.trans("flagrow-linguist.admin.placeholder.hint"))," ",m("span",this.originalString?K(n,this.props.highlight):n)])])]),m(".Flagrow-Linguist-Controls",this.actions().toArray())])},i.localeName=function(){return this.locale?[this.locale.name+" (",m("code",this.locale.key),")"]:e.a.translator.trans("flagrow-linguist.admin.locales.all")},i.actions=function(){var t=this,n=new I.a;return n.add("apply",k.a.component({type:"button",className:"Button Button--primary",children:e.a.translator.trans("flagrow-linguist.admin.buttons.apply"),loading:this.processing,disabled:!this.dirty,onclick:function(){t.saveString()}})),n.add("reset",k.a.component({type:"button",className:"Button",children:e.a.translator.trans("flagrow-linguist.admin.buttons.reset"),loading:this.processing,disabled:!this.dirty&&!this.string,onclick:function(){t.deleteString()}})),this.originalString&&n.add("copy-original",k.a.component({type:"button",className:"Button",children:e.a.translator.trans("flagrow-linguist.admin.buttons.copy-original"),loading:this.processing,onclick:function(){t.value=t.originalString,t.dirty=!0}})),n},i.saveString=function(){var t=this;this.value?(this.string||(this.string=e.a.store.createRecord("flagrow-linguist-string",{attributes:{key:this.stringKey.key(),locale:this.localeKey,value:""}})),this.string.data.attributes.value=this.value,this.string.locale()||delete this.string.data.attributes.locale,this.processing=!0,this.string.save(this.string.data.attributes).then(function(){t.processing=!1,t.dirty=!1,m.redraw()}).catch(function(n){throw t.processing=!1,n})):this.deleteString()},i.deleteString=function(){var t=this;this.string?(this.processing=!0,this.string.delete().then(function(){t.processing=!1,t.dirty=!1,t.string=null,t.value="",m.redraw()}).catch(function(n){throw t.processing=!1,n})):(this.value="",this.dirty=!1)},n}(v.a),N=function(t){function n(){return t.apply(this,arguments)||this}return a(n,t),n.prototype.view=function(){var t=this.props.stringKey,n=this.props.highlight;return m(".Flagrow-Linguist-Key",[m(".Flagrow-Linguist-Key-Code",m("code",K(t.key(),n))),m(".Flagrow-Linguist-Locales",[T().map(function(i){return m(E,{key:i.key,locale:i,stringKey:t,highlight:n})}),m(E,{key:"all",locale:null,stringKey:t,highlight:n})])])},n}(v.a),P=function(t){function n(){return t.apply(this,arguments)||this}a(n,t);var i=n.prototype;return i.init=function(){var t=this;this.numberOfResultsToShow=20,this.filters={search:"",withOwnTranslations:!1,withOriginalTranslationsInLocales:[],withoutOriginalTranslationsInLocales:[],forExtension:null},this.results=[],this.enabledExtensions=[],m.sync([e.a.request({method:"GET",url:e.a.forum.attribute("apiUrl")+"/flagrow/linguist/strings"}).then(function(t){e.a.store.pushPayload(t)}),e.a.request({method:"GET",url:e.a.forum.attribute("apiUrl")+"/flagrow/linguist/string-keys"}).then(function(n){var i=e.a.store.pushPayload(n);Object.keys(e.a.data.extensions).forEach(function(n){F.a.prototype.isEnabled(n)&&-1!==i.findIndex(function(t){return 0===t.key().indexOf(n+".")})&&t.enabledExtensions.push(e.a.data.extensions[n])})})]).then(function(){t.applyFilters()})},i.view=function(){var t=this,n=this.results.slice(0,this.numberOfResultsToShow);return m(".container",[m(".Flagrow-Linguist-Filters",{key:"filters"},[m("input.FormControl",{key:"search",value:this.filters.search,oninput:m.withAttr("value",function(n){t.filters.search=n,t.applyFilters()}),placeholder:e.a.translator.trans("flagrow-linguist.admin.filters.search")}),k.a.component({className:"Button"+(this.filters.withOwnTranslations?" Flagrow-Linguist-Filter--Selected":""),icon:"far fa-"+(this.filters.withOwnTranslations?"check-square":"square"),onclick:function(){t.filters.withOwnTranslations=!t.filters.withOwnTranslations,t.applyFilters()}},e.a.translator.trans("flagrow-linguist.admin.filters.with-own-translations")),O.a.component({buttonClassName:"Button"+(this.filters.forExtension?" Flagrow-Linguist-Filter--Selected":""),label:e.a.translator.trans("flagrow-linguist.admin.filters.for-extension")},this.enabledExtensions.map(function(n){return k.a.component({className:"Button",icon:"far fa-"+(t.filters.forExtension===n.id?"check-square":"square"),onclick:function(){t.filters.forExtension===n.id?t.filters.forExtension=null:t.filters.forExtension=n.id,t.applyFilters()}},n.extra["flarum-extension"].title)})),O.a.component({buttonClassName:"Button"+(this.filters.withoutOriginalTranslationsInLocales.length?" Flagrow-Linguist-Filter--Selected":""),label:e.a.translator.trans("flagrow-linguist.admin.filters.without-original-translations-in-locales")},T().map(function(n){return k.a.component({className:"Button",icon:"far fa-"+(t.filters.withoutOriginalTranslationsInLocales.includes(n.key)?"check-square":"square"),onclick:function(){-1!==t.filters.withoutOriginalTranslationsInLocales.indexOf(n.key)?t.filters.withoutOriginalTranslationsInLocales=t.filters.withoutOriginalTranslationsInLocales.filter(function(t){return t!==n.key}):t.filters.withoutOriginalTranslationsInLocales.push(n.key),t.applyFilters()}},n.name+" ("+n.key+")")})),O.a.component({buttonClassName:"Button"+(this.filters.withOriginalTranslationsInLocales.length?" Flagrow-Linguist-Filter--Selected":""),label:e.a.translator.trans("flagrow-linguist.admin.filters.with-original-translations-in-locales")},T().map(function(n){return k.a.component({className:"Button",icon:"far fa-"+(t.filters.withOriginalTranslationsInLocales.includes(n.key)?"check-square":"square"),onclick:function(){-1!==t.filters.withOriginalTranslationsInLocales.indexOf(n.key)?t.filters.withOriginalTranslationsInLocales=t.filters.withOriginalTranslationsInLocales.filter(function(t){return t!==n.key}):t.filters.withOriginalTranslationsInLocales.push(n.key),t.applyFilters()}},n.name+" ("+n.key+")")}))]),n.map(function(n){return m(N,{key:n.id(),stringKey:n,highlight:t.filters.search})}),m(".Flagrow-Linguist-Results",{key:"results-stats"},[e.a.translator.trans("flagrow-linguist.admin.filters.results",{shown:n.length+"",total:this.results.length+""})," ",this.results.length>n.length?k.a.component({className:"Button",onclick:function(){t.numberOfResultsToShow+=20}},e.a.translator.trans("flagrow-linguist.admin.buttons.load-more")):null])])},i.applyFilters=function(){var t=this;this.numberOfResultsToShow=20;var n=e.a.store.all("flagrow-linguist-string").map(function(t){return t.key()});this.results=e.a.store.all("flagrow-linguist-string-key").filter(function(i){if(t.filters.withOwnTranslations&&-1===n.indexOf(i.key()))return!1;var r=t.filters.withOriginalTranslationsInLocales,e=Array.isArray(r),a=0;for(r=e?r:r[Symbol.iterator]();;){var s;if(e){if(a>=r.length)break;s=r[a++]}else{if((a=r.next()).done)break;s=a.value}var o=s;if(!i.locales().hasOwnProperty(o))return!1}var l=t.filters.withoutOriginalTranslationsInLocales,u=Array.isArray(l),c=0;for(l=u?l:l[Symbol.iterator]();;){var f;if(u){if(c>=l.length)break;f=l[c++]}else{if((c=l.next()).done)break;f=c.value}var g=f;if(console.log(g),i.locales().hasOwnProperty(g))return!1}if(t.filters.forExtension&&0!==i.key().indexOf(t.filters.forExtension+"."))return!1;if(t.filters.search){if(-1!==i.key().indexOf(t.filters.search))return!0;var h=i.locales();for(var p in h)if(h.hasOwnProperty(p)&&-1!==h[p].indexOf(t.filters.search))return!0;return!1}return!0}),m.redraw()},n}(v.a);e.a.initializers.add("flagrow-linguist",function(t){t.store.models["flagrow-linguist-string-key"]=c,t.store.models["flagrow-linguist-string"]=f,e.a.routes["flagrow-linguist-strings"]={path:"/flagrow/linguist",component:P.component()},e.a.extensionSettings["flagrow-linguist"]=function(){return m.route(e.a.route("flagrow-linguist-strings"))},Object(g.extend)(p.a.prototype,"items",function(t){t.add("flagrow-linguist-strings",y.a.component({href:e.a.route("flagrow-linguist-strings"),icon:"fas fa-italic",children:e.a.translator.trans("flagrow-linguist.admin.menu.title"),description:e.a.translator.trans("flagrow-linguist.admin.menu.description")}))})})}]);
//# sourceMappingURL=admin.js.map