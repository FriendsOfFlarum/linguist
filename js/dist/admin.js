module.exports=function(t){var n={};function i(a){if(n[a])return n[a].exports;var e=n[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=t,i.c=n,i.d=function(t,n,a){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var e in t)i.d(a,e,function(n){return t[n]}.bind(null,e));return a},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="",i(i.s=14)}([function(t,n){t.exports=flarum.core.compat["admin/app"]},function(t,n){t.exports=flarum.core.compat["common/components/Button"]},function(t,n){t.exports=flarum.core.compat["common/components/Select"]},function(t,n){t.exports=flarum.core.compat["common/Model"]},function(t,n){t.exports=flarum.core.compat["common/utils/extractText"]},function(t,n){t.exports=flarum.core.compat["common/components/Switch"]},function(t,n){t.exports=flarum.core.compat["common/components/Dropdown"]},function(t,n){t.exports=flarum.core.compat["admin/components/LoadingModal"]},function(t,n){t.exports=flarum.core.compat["admin/components/ExtensionPage"]},function(t,n){t.exports=flarum.core.compat["common/components/LoadingIndicator"]},function(t,n){t.exports=flarum.core.compat["common/components/Alert"]},function(t,n){t.exports=flarum.core.compat["common/utils/ItemList"]},function(t,n){t.exports=flarum.core.compat["common/helpers/icon"]},function(t,n){t.exports=flarum.core.compat["common/components/LinkButton"]},function(t,n,i){"use strict";i.r(n);var a=i(0),e=i.n(a);function o(t,n){return(o=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function s(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n)}var r=i(3),l=i.n(r),c=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];return(n=t.call.apply(t,[this].concat(a))||this).key=l.a.attribute("key"),n.locales=l.a.attribute("locales"),n}return s(n,t),n}(l.a),u=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];return(n=t.call.apply(t,[this].concat(a))||this).key=l.a.attribute("key"),n.locale=l.a.attribute("locale"),n.value=l.a.attribute("value"),n}return s(n,t),n.prototype.apiEndpoint=function(){return"/fof/linguist/strings"+(this.exists?"/"+this.data.id:"")},n}(l.a),f=i(8),g=i.n(f),p=i(9),h=i.n(p),d=i(1),y=i.n(d),v=i(6),F=i.n(v),x=i(2),w=i.n(x),b=i(10),k=i.n(b),L=i(7),T=i.n(L),O=i(4),B=i.n(O),N=function(){var t=[];for(var n in e.a.data.locales)e.a.data.locales.hasOwnProperty(n)&&t.push({key:n,name:e.a.data.locales[n]});return t},E=i(11),P=i.n(E),C=function(t,n){if(!n)return t;var i=n.toLowerCase(),a=new RegExp(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");return t.replace(a,"<fof-highlight>$&<fof-highlight>").split("<fof-highlight>").map((function(t){return t.toLowerCase()===i?m("span.FoF-Linguist-Highlight",t):t}))},S=function(){function t(){}var n=t.prototype;return n.oninit=function(t){var n=this;this.stringKey=t.attrs.stringKey,this.locale=t.attrs.locale,this.localeKey=this.locale?this.locale.key:null,this.originalString=this.localeKey&&this.stringKey.locales().hasOwnProperty(this.localeKey)?this.stringKey.locales()[this.localeKey]:null,this.string=e.a.store.all("fof-linguist-string").find((function(t){return t.key()===n.stringKey.key()&&t.locale()===n.localeKey})),this.value=this.string?this.string.value():"",this.dirty=!1,this.processing=!1;var i=Object.keys(this.stringKey.locales()).some((function(t){return-1!==n.stringKey.locales()[t].indexOf("\n")}));this.inputType="input",(i||-1!==this.value.indexOf("\n"))&&(this.inputType="textarea")},n.view=function(t){var n=this,i=this.originalString?this.originalString:"("+e.a.translator.trans("fof-linguist.admin.placeholder."+(this.localeKey?"not-translated":"all-locales"))+")";return m(".FoF-Linguist-Locale",[m("label.FoF-Linguist-Label",this.localeName()),m(".FoF-Linguist-Field",{className:(this.value?"FoF-Linguist-Field--with-value":"")+(this.originalString?" FoF-Linguist-Field--with-original-string":""),title:i},[m(".FoF-Linguist-Field-Wrap",[m(this.inputType,{className:"FormControl FoF-Linguist-Input",value:this.value,oninput:function(t){n.value=t.target.value,n.dirty=!0,n.value||n.string||(n.dirty=!1)},disabled:this.processing}),m(".FoF-Linguist-Placeholder",[m("span.FoF-Linguist-Placeholder-Hint",e.a.translator.trans("fof-linguist.admin.placeholder.hint"))," ",m("span",this.originalString?C(i,t.attrs.highlight):i)])])]),m(".FoF-Linguist-Controls",this.actions(t.attrs.onchange).toArray())])},n.localeName=function(){return this.locale?[this.locale.name+" (",m("code",this.locale.key),")"]:e.a.translator.trans("fof-linguist.admin.locales.all")},n.actions=function(t){var n=this,i=new P.a;return i.add("apply",y.a.component({type:"button",className:"Button Button--primary",loading:this.processing,disabled:!this.dirty,onclick:function(){n.saveString(t)}},e.a.translator.trans("fof-linguist.admin.buttons.apply"))),i.add("reset",y.a.component({type:"button",className:"Button",loading:this.processing,disabled:!this.dirty&&!this.string,onclick:function(){n.deleteString(t)}},e.a.translator.trans("fof-linguist.admin.buttons.reset"))),this.originalString&&i.add("copy-original",y.a.component({type:"button",className:"Button",loading:this.processing,onclick:function(){n.value=n.originalString,n.dirty=!0}},e.a.translator.trans("fof-linguist.admin.buttons.copy-original"))),i},n.saveString=function(t){var n=this;this.value?(this.string||(this.string=e.a.store.createRecord("fof-linguist-string",{attributes:{key:this.stringKey.key(),locale:this.localeKey,value:""}})),this.string.data.attributes.value=this.value,this.string.locale()||delete this.string.data.attributes.locale,this.processing=!0,this.string.save(this.string.data.attributes).then((function(){n.processing=!1,n.dirty=!1,t(),m.redraw()})).catch((function(t){throw n.processing=!1,t}))):this.deleteString(t)},n.deleteString=function(t){var n=this;this.string?(this.processing=!0,this.string.delete().then((function(){n.processing=!1,n.dirty=!1,n.string=null,n.value="",t(),m.redraw()})).catch((function(t){throw n.processing=!1,t}))):(this.value="",this.dirty=!1)},t}(),_=function(){function t(){}return t.prototype.view=function(t){var n=t.attrs,i=n.stringKey,a=n.highlight,e=n.onchange;return m(".FoF-Linguist-Key",[m(".FoF-Linguist-Key-Code",m("code",C(i.key(),a))),m(".FoF-Linguist-Locales",[].concat(N().map((function(t){return m(S,{key:t.key,locale:t,stringKey:i,highlight:a,onchange:e})})),[m(S,{key:"all",locale:null,stringKey:i,highlight:a,onchange:e})]))])},t}(),I=function(t){var n=e.a.translator.translations["fof-linguist.admin.known-namespace."+t];return n||t},K=function(t){var n=e.a.translator.translations["fof-linguist.admin.known-frontend."+t];return n||t},A=function(t,n){return n.reduce((function(n,i){return"start"===n?i:"or"===t?n||i:n&&i}),"start")},j=function(){function t(){}var n=t.prototype;return n.oninit=function(t){this.numberOfResultsToShow=20,this.filters=Object.assign({search:"",withOwnTranslations:!1,missingTranslationsNegation:"without",missingTranslationsType:"any",missingTranslationsOperation:"or",missingTranslationsInLocales:[],forExtension:null,frontend:null},t.attrs.initialBrowseFilters||{}),this.results=[],this.applyFilters()},n.view=function(t){var n=this,i=this.results.slice(0,this.numberOfResultsToShow);return[m("div","1"===e.a.data.settings["fof.linguist.should-clear-cache"]?k.a.component({dismissible:!1,controls:[y.a.component({className:"Button Button--link",onclick:function(){e.a.modal.show(T.a),e.a.request({method:"DELETE",url:e.a.forum.attribute("apiUrl")+"/cache"}).then((function(){return window.location.reload()}))}},e.a.translator.trans("fof-linguist.admin.clear-cache.button"))]},e.a.translator.trans("fof-linguist.admin.clear-cache.text")):null),m(".FoF-Linguist-Filters",[m("input.FormControl",{value:this.filters.search,oninput:function(t){n.filters.search=t.target.value,n.applyFilters()},placeholder:e.a.translator.trans("fof-linguist.admin.filters.search")}),y.a.component({className:"Button"+(this.filters.withOwnTranslations?" FoF-Linguist-Filter--Selected":""),icon:"far fa-"+(this.filters.withOwnTranslations?"check-square":"square"),onclick:function(){n.filters.withOwnTranslations=!n.filters.withOwnTranslations,n.applyFilters()}},e.a.translator.trans("fof-linguist.admin.filters.with-own-translations")),F.a.component({buttonClassName:"Button"+(this.filters.forExtension?" FoF-Linguist-Filter--Selected":""),label:e.a.translator.trans("fof-linguist.admin.filters.for-extension")},t.attrs.namespaces.map((function(t){return y.a.component({className:"Button",icon:"far fa-"+(n.filters.forExtension===t.namespace?"dot-circle":"circle"),onclick:function(){n.filters.forExtension===t.namespace?n.filters.forExtension=null:n.filters.forExtension=t.namespace,n.applyFilters()}},t.extension?t.extension.extra["flarum-extension"].title:I(t.namespace))}))),F.a.component({buttonClassName:"Button"+(this.filters.frontend?" FoF-Linguist-Filter--Selected":""),label:e.a.translator.trans("fof-linguist.admin.filters.frontend")},["_all_except_admin"].concat(t.attrs.frontends).map((function(t){return y.a.component({className:"Button",icon:"far fa-"+(n.filters.frontend===t?"dot-circle":"circle"),onclick:function(){n.filters.frontend===t?n.filters.frontend=null:n.filters.frontend=t,n.applyFilters()}},"_all_except_admin"===t?e.a.translator.trans("fof-linguist.admin.filters.frontend-all-except-admin"):K(t))}))),F.a.component({buttonClassName:"Button"+(this.filters.missingTranslationsInLocales.length?" FoF-Linguist-Filter--Selected":""),label:e.a.translator.trans("fof-linguist.admin.filters.missing")},[m(".FoF-Linguist-Missing-Filter",{onclick:function(t){t.stopPropagation()}},[w.a.component({value:this.filters.missingTranslationsNegation,onchange:function(t){n.filters.missingTranslationsNegation=t,n.filters.missingTranslationsInLocales.length&&n.applyFilters()},options:{without:e.a.translator.trans("fof-linguist.admin.filters.negation-options.without"),with:e.a.translator.trans("fof-linguist.admin.filters.negation-options.with")}}),w.a.component({value:this.filters.missingTranslationsType,onchange:function(t){n.filters.missingTranslationsType=t,n.filters.missingTranslationsInLocales.length&&n.applyFilters()},options:{any:e.a.translator.trans("fof-linguist.admin.filters.type-options.any"),original:e.a.translator.trans("fof-linguist.admin.filters.type-options.original"),own:e.a.translator.trans("fof-linguist.admin.filters.type-options.own")}}),m("p",e.a.translator.trans("fof-linguist.admin.filters.missing-middle-label")),w.a.component({value:this.filters.missingTranslationsOperation,onchange:function(t){n.filters.missingTranslationsOperation=t,n.filters.missingTranslationsInLocales.length&&n.applyFilters()},options:{or:e.a.translator.trans("fof-linguist.admin.filters.operation-options.or"),and:e.a.translator.trans("fof-linguist.admin.filters.operation-options.and")}})])].concat(N().map((function(t){return y.a.component({className:"Button",icon:"far fa-"+(-1!==n.filters.missingTranslationsInLocales.indexOf(t.key)?"check-square":"square"),onclick:function(){-1!==n.filters.missingTranslationsInLocales.indexOf(t.key)?n.filters.missingTranslationsInLocales=n.filters.missingTranslationsInLocales.filter((function(n){return n!==t.key})):n.filters.missingTranslationsInLocales.push(t.key),n.applyFilters()}},t.name+" ("+t.key+")")})))),F.a.component({buttonClassName:"Button",label:e.a.translator.trans("fof-linguist.admin.filters.mass-edit")},[y.a.component({icon:"far fa-clone",className:"Button",onclick:function(){var t=e.a.store.all("fof-linguist-string").filter((function(t){var n=e.a.store.getById("fof-linguist-string-key",t.key());return n&&n.locales()[t.locale()]===t.value()}));if(confirm(B()(e.a.translator.trans("fof-linguist.admin.buttons.delete-redundant-confirm",{count:t.length+""})))){if(0===t.length)return;e.a.modal.show(T.a),Promise.all(t.map((function(t){return t.delete()}))).then((function(){window.location.reload()}))}}},e.a.translator.trans("fof-linguist.admin.buttons.delete-redundant")),y.a.component({icon:"fas fa-trash",className:"Button",onclick:function(){var t=e.a.store.all("fof-linguist-string");if(confirm(B()(e.a.translator.trans("fof-linguist.admin.buttons.delete-all-confirm",{count:t.length+""})))){if(0===t.length)return;e.a.modal.show(T.a),Promise.all(t.map((function(t){return t.delete()}))).then((function(){window.location.reload()}))}}},e.a.translator.trans("fof-linguist.admin.buttons.delete-all"))])]),m("div",i.map((function(t){return m(_,{key:t.id(),stringKey:t,highlight:n.filters.search,onchange:function(){e.a.data.settings["fof.linguist.should-clear-cache"]="1"}})}))),m(".FoF-Linguist-Results",[e.a.translator.trans("fof-linguist.admin.filters.results",{shown:i.length+"",total:this.results.length+""})," ",this.results.length>i.length?y.a.component({className:"Button",onclick:function(){n.numberOfResultsToShow+=20}},e.a.translator.trans("fof-linguist.admin.buttons.load-more")):null])]},n.applyFilters=function(){var t=this;this.numberOfResultsToShow=20;var n=e.a.store.all("fof-linguist-string").map((function(t){return t.key()})),i={};N().forEach((function(t){i[t.key]=e.a.store.all("fof-linguist-string").filter((function(n){return n.locale()===t.key})).map((function(t){return t.key()}))}));var a="";this.filters.search&&(a=this.filters.search.toLowerCase()),this.results=e.a.store.all("fof-linguist-string-key").filter((function(e){if(t.filters.withOwnTranslations&&-1===n.indexOf(e.key()))return!1;if(t.filters.missingTranslationsInLocales.length){var o=t.filters.missingTranslationsOperation;"without"===t.filters.missingTranslationsNegation&&(o="or"===o?"and":"or");var s=A(o,t.filters.missingTranslationsInLocales.map((function(t){return e.locales().hasOwnProperty(t)}))),r=A(o,t.filters.missingTranslationsInLocales.map((function(t){return-1!==i[t].indexOf(e.key())}))),l=!1;switch(t.filters.missingTranslationsType){case"any":l=s||r;break;case"original":l=s;break;case"own":l=r}if("without"===t.filters.missingTranslationsNegation&&(l=!l),!l)return!1}if(t.filters.forExtension&&0!==e.key().indexOf(t.filters.forExtension+"."))return!1;if(t.filters.frontend){var c=e.key().split(".");if("_all_except_admin"===t.filters.frontend){if(c.length>=2&&"admin"===c[1])return!1}else if(c.length<2||c[1]!==t.filters.frontend)return!1}if(a){if(-1!==e.key().toLowerCase().indexOf(a))return!0;var u=e.locales();for(var f in u)if(u.hasOwnProperty(f)&&-1!==u[f].toLowerCase().indexOf(a))return!0;return!1}return!0})),m.redraw()},t}(),M=i(12),q=i.n(M),U=function(){function t(){}var n=t.prototype;return n.oninit=function(){this.columns="locale",this.showAllFrontends=!1,this.totalPercent=!0,this.locale=[];var t=N().find((function(t){return"en"!==t.key}));t&&(this.locale=t.key)},n.view=function(t){var n=this,i=t.attrs.frontends.slice(0,2);this.showAllFrontends&&(i=t.attrs.frontends);var a=t.attrs.browseWithFilters;return[m(".FoF-Linguist-Filters",[m(".ButtonGroup",[y.a.component({className:"Button"+(this.totalPercent?" active":""),onclick:function(){n.totalPercent=!0}},e.a.translator.trans("fof-linguist.admin.coverage.total-options.percent")),y.a.component({className:"Button"+(this.totalPercent?" ":" active"),onclick:function(){n.totalPercent=!1}},e.a.translator.trans("fof-linguist.admin.coverage.total-options.count"))]),m(".ButtonGroup",[y.a.component({className:"Button"+("locale"===this.columns?" active":""),onclick:function(){n.columns="locale"}},e.a.translator.trans("fof-linguist.admin.coverage.column-options.locale")),y.a.component({className:"Button"+("namespace"===this.columns?" active":""),onclick:function(){n.columns="namespace",n.showAllFrontends=!1}},e.a.translator.trans("fof-linguist.admin.coverage.column-options.namespace"))]),"namespace"===this.columns?m(".ButtonGroup",N().map((function(t){return y.a.component({className:"Button"+(n.locale===t.key?" active":""),onclick:function(){n.locale!==t.key&&(n.locale=t.key)}},t.name+" ("+t.key+")")}))):null]),m("table.FoF-Linguist-Coverage",[m("thead",m("tr",[m("th",e.a.translator.trans("fof-linguist.admin.coverage.columns.namespace")),"locale"===this.columns?N().map((function(t){return m("th",t.name+" ("+t.key+")")})):[this.showAllFrontends?i.map((function(t){return m("th",K(t))})):[m("th",e.a.translator.trans("fof-linguist.admin.coverage.columns.all-except-admin")),m("th",K("admin")),m("th",y.a.component({className:"Button",onclick:function(){n.showAllFrontends=!0}},e.a.translator.trans("fof-linguist.admin.coverage.columns.all-frontends")))]]])),m("tbody",["locale"===this.columns?m("tr",[m("td",[m("span.FoF-Linguist-Coverage-Extension-Icon.FoF-Linguist-Coverage-Namespace-Icon"),m("span.FoF-Linguist-Coverage-Extension-Title",e.a.translator.trans("fof-linguist.admin.coverage.all-namespaces"))]),N().map((function(t){return m("td",n.localeCoverage(a,t.key))}))]):null,t.attrs.namespaces.map((function(t){return m("tr",[m("td",t.extension?[m("span.FoF-Linguist-Coverage-Extension-Icon",{style:t.extension.icon},t.extension.icon?q()(t.extension.icon.name):""),m("span.FoF-Linguist-Coverage-Extension-Title",t.extension.extra["flarum-extension"].title)]:[m("span.FoF-Linguist-Coverage-Extension-Icon.FoF-Linguist-Coverage-Namespace-Icon"),m("span.FoF-Linguist-Coverage-Extension-Title",I(t.namespace))]),"locale"===n.columns?N().map((function(i){return m("td",n.localeCoverage(a,i.key,t.namespace))})):[n.showAllFrontends?i.map((function(i){return m("td",n.prefixCoverage(a,t.namespace,i))})):[m("td",n.prefixCoverage(a,t.namespace,"_all_except_admin")),m("td",n.prefixCoverage(a,t.namespace,"admin"))]]])}))])])]},n.prefixCoverage=function(t,n,i){return this.locale?this.localeCoverage(t,this.locale,n,i):null},n.localeCoverage=function(t,n,i,a){var o=e.a.store.all("fof-linguist-string-key").filter((function(t){if(!i)return!0;var n=t.key().split(".");if(n[0]!==i)return!1;if("_all_except_admin"===a){if(n.length>=2&&"admin"===n[1])return!1}else if(a&&(n.length<2||n[1]!==a))return!1;return!0}));if(0===o.length)return"-";var s=0,r=0;o.forEach((function(t){e.a.store.all("fof-linguist-string").find((function(i){return i.key()===t.key()&&i.locale()===n}))?s++:t.locales().hasOwnProperty(n)&&r++}));var l,c,u=Math.round((s+r)/o.length*100);return 100===u?l="full":u<5&&(l="low"),c=this.totalPercent?e.a.translator.trans("fof-linguist.admin.coverage.count.percent",{percent:u+""}):e.a.translator.trans("fof-linguist.admin.coverage.count.total",{translated:s+r+"",total:o.length}),m(".FoF-Linguist-Coverage-Progress-Wrap",[m(".FoF-Linguist-Progress",{className:l?"FoF-Linguist-Progress--"+l:""},[m(".FoF-Linguist-Progress-Bar",{style:{width:Math.max(u,5)+"%"}}),m(".FoF-Linguist-Progress-Label",c),m(".FoF-Linguist-Progress-More",e.a.translator.trans("fof-linguist.admin.coverage.count.details",{total:o.length,original:r+"",custom:s+""}))]),y.a.component({icon:"fas fa-filter",className:"Button Button--icon",onclick:function(){var e={missingTranslationsInLocales:[n]};i&&(e.forExtension=i),a&&(e.frontend=a),t(e)},title:e.a.translator.trans("fof-linguist.admin.coverage.apply-missing-filter")})])},t}(),R=i(5),G=i.n(R),W=i(13),D=i.n(W),$=function(){function t(){}var n=t.prototype;return n.oninit=function(){this.locale="en",this.namespace=null,this.includeOriginals=!1,this.includeAll=!1,this.loading=!1,this.output="",this.fetchOutput()},n.view=function(t){var n=this,i={};N().forEach((function(t){i[t.key]=t.name+" ("+t.key+")"})),i.all=e.a.translator.trans("fof-linguist.admin.export.locale-all");var a={_all:e.a.translator.trans("fof-linguist.admin.export.namespace-all")};return t.attrs.namespaces.forEach((function(t){t.extension?a[t.namespace]=t.extension.extra["flarum-extension"].title:a[t.namespace]=I(t.namespace)})),[m("h2",e.a.translator.trans("fof-linguist.admin.export.title")),m(".Form-group",m(".Alert",e.a.translator.trans("fof-linguist.admin.export.warning"))),m(".Form-group",[m("label",e.a.translator.trans("fof-linguist.admin.export.locale")),w.a.component({options:i,value:this.locale,onchange:function(t){n.locale=t,n.fetchOutput()}})]),m(".Form-group",[m("label",e.a.translator.trans("fof-linguist.admin.export.namespace")),w.a.component({options:a,value:null===this.namespace?"_all":this.namespace,onchange:function(t){n.namespace="_all"===t?null:t,n.fetchOutput()}})]),m(".Form-group",[G.a.component({state:this.includeOriginals,onchange:function(t){n.includeOriginals=t,n.fetchOutput()}},e.a.translator.trans("fof-linguist.admin.export.include-originals"))]),m(".Form-group",[G.a.component({state:this.includeAll,onchange:function(t){n.includeAll=t,n.fetchOutput()}},e.a.translator.trans("fof-linguist.admin.export.include-all"))]),m(".Form-group",[m("label",[e.a.translator.trans("fof-linguist.admin.export.output")," ",D.a.component({className:"Button Button--primary",href:this.exportUrl(),external:!0,download:(this.namespace||this.locale)+".yml"},e.a.translator.trans("fof-linguist.admin.export.download"))]),m("textarea.FormControl.FoF-Export-Textarea",{readonly:!0,value:this.output,rows:10,placeholder:this.loading?e.a.translator.trans("fof-linguist.admin.export.output-loading"):e.a.translator.trans("fof-linguist.admin.export.output-empty")})])]},n.exportUrl=function(){return e.a.forum.attribute("apiUrl")+"/fof/linguist/export?"+m.buildQueryString({locale:this.locale,namespace:this.namespace,includeOriginals:this.includeOriginals?"1":"0",includeAll:this.includeAll?"1":"0"})},n.fetchOutput=function(){var t=this;this.loading=!0,this.output="",e.a.request({method:"GET",url:this.exportUrl(),extract:function(t){return JSON.stringify(t)}}).then((function(n){t.loading=!1,t.output=n,m.redraw()})).catch((function(n){throw t.loading=!1,m.redraw(),n}))},t}(),H=function(){function t(){}var n=t.prototype;return n.oninit=function(){this.locale="en",this.overrideExisting=!0,this.input="",this.loading=!1},n.view=function(){var t=this,n={};return N().forEach((function(t){n[t.key]=t.name+" ("+t.key+")"})),n.all=e.a.translator.trans("fof-linguist.admin.import.locale-all"),[m("h2",e.a.translator.trans("fof-linguist.admin.import.title")),m(".Form-group",[m("label",e.a.translator.trans("fof-linguist.admin.import.input")),m("textarea.FormControl",{value:this.input,oninput:function(n){t.input=n.target.value},rows:10,placeholder:e.a.translator.trans("fof-linguist.admin.import.input-placeholder")})]),m(".Form-group",[m("label",e.a.translator.trans("fof-linguist.admin.import.locale")),w.a.component({options:n,value:this.locale,onchange:function(n){t.locale=n,t.fetchOutput()}})]),m(".Form-group",[G.a.component({state:this.overrideExisting,onchange:function(n){t.overrideExisting=n}},e.a.translator.trans("fof-linguist.admin.import.override-existing"))]),m(".Form-group",y.a.component({className:"Button Button--primary",onclick:function(){t.loading=!0,e.a.request({method:"POST",url:e.a.forum.attribute("apiUrl")+"/fof/linguist/import",body:{input:t.input,locale:t.locale,ignoreExisting:!t.overrideExisting}}).then((function(n){t.loading=!1,m.redraw(),confirm(B()(e.a.translator.trans(t.overrideExisting?"fof-linguist.admin.import.results":"fof-linguist.admin.import.results-with-ignore",{imported:n.imported+"",ignored:n.ignored+"",identical:n.identical+""})))&&window.location.reload()})).catch((function(n){throw t.loading=!1,m.redraw(),n}))},disabled:this.loading||!this.input,loading:this.loading},e.a.translator.trans("fof-linguist.admin.import.submit")))]},t}(),z=function(t){function n(){return t.apply(this,arguments)||this}s(n,t);var i=n.prototype;return i.oninit=function(n){var i=this;t.prototype.oninit.call(this,n),this.tab="strings",this.ready=!1,this.namespaces=[],this.frontends=["forum","admin","lib","ref","api"],this.initialBrowseFilters={},Promise.all([e.a.request({method:"GET",url:e.a.forum.attribute("apiUrl")+"/fof/linguist/strings"}).then((function(t){e.a.store.pushPayload(t)})),e.a.request({method:"GET",url:e.a.forum.attribute("apiUrl")+"/fof/linguist/string-keys"}).then((function(t){var n=e.a.store.pushPayload(t),a=[];n.forEach((function(t){var n=t.key().split("."),e=n[0];if(-1===["core","validation"].indexOf(e)&&-1===a.indexOf(e)&&a.push(e),n.length>1&&"validation"!==e){var o=n[1];-1===i.frontends.indexOf(o)&&i.frontends.push(o)}})),a.sort(),i.namespaces=[{namespace:"core"},{namespace:"validation"}].concat(a.map((function(t){var n=e.a.data.extensions[t];return n||(n=Object.values(e.a.data.extensions).find((function(n){var i=n.name.replace("/","-");return t===i}))),{namespace:t,extension:n}})))}))]).then((function(){i.ready=!0,m.redraw()}))},i.content=function(){return m(".ExtensionPage-settings",m(".container",[this.contentTab()]))},i.infoItems=function(){var n=this,i=t.prototype.infoItems.call(this);return i.add("linguist-tabs",m("ul.FoF-Linguist-Tabs",[m("li",m("a",{className:"strings"===this.tab?"active":"",onclick:function(){n.tab="strings"}},e.a.translator.trans("fof-linguist.admin.tabs.strings"))),m("li",m("a",{className:"coverage"===this.tab?"active":"",onclick:function(){n.tab="coverage"}},e.a.translator.trans("fof-linguist.admin.tabs.coverage"))),m("li",m("a",{className:"export"===this.tab?"active":"",onclick:function(){n.tab="export"}},e.a.translator.trans("fof-linguist.admin.tabs.export"))),m("li",m("a",{className:"import"===this.tab?"active":"",onclick:function(){n.tab="import"}},e.a.translator.trans("fof-linguist.admin.tabs.import")))]),100),i},i.contentTab=function(){var t=this;if(!this.ready)return h.a.component();switch(this.tab){case"strings":return m(j,{namespaces:this.namespaces,frontends:this.frontends,initialBrowseFilters:this.initialBrowseFilters});case"coverage":return m(U,{namespaces:this.namespaces,frontends:this.frontends,browseWithFilters:function(n){t.initialBrowseFilters=n,t.tab="strings"}});case"export":return m($,{namespaces:this.namespaces});case"import":return m(H)}return null},n}(g.a);e.a.initializers.add("fof-linguist",(function(t){t.store.models["fof-linguist-string-key"]=c,t.store.models["fof-linguist-string"]=u,t.extensionData.for("fof-linguist").registerPage(z)}))}]);
//# sourceMappingURL=admin.js.map