{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/linguist/webpack/bootstrap","webpack://@fof/linguist/webpack/runtime/compat get default export","webpack://@fof/linguist/webpack/runtime/define property getters","webpack://@fof/linguist/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/linguist/webpack/runtime/make namespace object","webpack://@fof/linguist/external root \"flarum.core.compat['admin/app']\"","webpack://@fof/linguist/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/linguist/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/linguist/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/linguist/./src/admin/models/StringKey.js","webpack://@fof/linguist/./src/admin/models/TextString.js","webpack://@fof/linguist/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/linguist/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/linguist/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/linguist/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/linguist/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/linguist/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/linguist/external root \"flarum.core.compat['admin/components/LoadingModal']\"","webpack://@fof/linguist/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/linguist/./src/admin/utils/localesAsArray.js","webpack://@fof/linguist/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/linguist/./src/admin/utils/highlightMithril.js","webpack://@fof/linguist/./src/admin/components/StringLocale.js","webpack://@fof/linguist/./src/admin/components/StringKey.js","webpack://@fof/linguist/./src/admin/utils/namespaceLabel.js","webpack://@fof/linguist/./src/admin/utils/frontendLabel.js","webpack://@fof/linguist/./src/admin/utils/booleanCheck.js","webpack://@fof/linguist/./src/admin/pages/StringsPage.js","webpack://@fof/linguist/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/linguist/./src/admin/pages/CoveragePage.js","webpack://@fof/linguist/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/linguist/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/linguist/./src/admin/pages/ExportPage.js","webpack://@fof/linguist/./src/admin/pages/ImportPage.js","webpack://@fof/linguist/./src/admin/pages/LinguistPage.js","webpack://@fof/linguist/./src/admin/components/index.js","webpack://@fof/linguist/./src/admin/models/index.js","webpack://@fof/linguist/./src/admin/pages/index.js","webpack://@fof/linguist/./src/admin/utils/index.js","webpack://@fof/linguist/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from \"flarum/common/Model\";\n\nexport default class StringKey extends Model {\n    key = Model.attribute(\"key\");\n    locales = Model.attribute(\"locales\");\n}\n","import Model from \"flarum/common/Model\";\n\nexport default class TextString extends Model {\n    key = Model.attribute(\"key\");\n    locale = Model.attribute(\"locale\");\n    value = Model.attribute(\"value\");\n\n    apiEndpoint() {\n        return (\n            \"/fof/linguist/strings\" + (this.exists ? \"/\" + this.data.id : \"\")\n        );\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/LoadingModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","import app from \"flarum/admin/app\";\n\nexport default function () {\n    let locales = [];\n\n    let englishFound = false;\n\n    for (let key in app.data.locales) {\n        if (!app.data.locales.hasOwnProperty(key)) {\n            continue;\n        }\n\n        if (key === \"en\") {\n            englishFound = true;\n        }\n\n        locales.push({\n            key,\n            name: app.data.locales[key],\n        });\n    }\n\n    // Always show English for the following reasons:\n    // It's the fallback locale, so the translations are always active\n    // It's the bundled locale for most extensions, so it makes sense to have access to it as reference\n    if (!englishFound) {\n        locales.unshift({\n            key: \"en\",\n            // Hard-coded to the same value as in flarum/lang-english composer.json\n            // Since other locale names won't be translated to the current language either it doesn't make sense to use a translation\n            name: \"English\",\n        });\n    }\n\n    return locales;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","/* global m */\n\nconst HIGHLIGHT_DELIMITER = \"<fof-highlight>\";\n\n// Takes a string and highlight a keyword with a span with mithril template\n// The output will be an array if a keyword is given\nexport default function (string, highlight) {\n    if (!highlight) {\n        return string;\n    }\n\n    const lowercaseHighliht = highlight.toLowerCase();\n\n    // Regex to match the highlighted work in a case-insensitive manner\n    const regex = new RegExp(\n        lowercaseHighliht.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"),\n        \"i\",\n    );\n\n    return string\n        .replace(regex, HIGHLIGHT_DELIMITER + \"$&\" + HIGHLIGHT_DELIMITER)\n        .split(HIGHLIGHT_DELIMITER)\n        .map((text) => {\n            if (text.toLowerCase() === lowercaseHighliht) {\n                return m(\"span.FoF-Linguist-Highlight\", text);\n            }\n\n            return text;\n        });\n}\n","import app from \"flarum/admin/app\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport Button from \"flarum/common/components/Button\";\nimport highlightMithril from \"../utils/highlightMithril\";\n\n/* global m */\n\nexport default class StringLocale {\n    oninit(vnode) {\n        this.stringKey = vnode.attrs.stringKey;\n        this.locale = vnode.attrs.locale;\n        this.localeKey = this.locale ? this.locale.key : null;\n        this.originalString =\n            this.localeKey &&\n            this.stringKey.locales().hasOwnProperty(this.localeKey)\n                ? this.stringKey.locales()[this.localeKey]\n                : null;\n\n        this.string = app.store\n            .all(\"fof-linguist-string\")\n            .find(\n                (string) =>\n                    string.key() === this.stringKey.key() &&\n                    string.locale() === this.localeKey,\n            );\n\n        this.value = this.string ? this.string.value() : \"\";\n        this.dirty = false;\n        this.processing = false;\n\n        // We check whether any original translation in any language has a newline\n        // By not hard-coding to English, this should work pretty well even if the fallback locale is modified,\n        // or if a text happens to not be available in the fallback language\n        const originalHasNewLine = Object.keys(this.stringKey.locales()).some(\n            (key) => this.stringKey.locales()[key].indexOf(\"\\n\") !== -1,\n        );\n\n        this.inputType = \"input\";\n\n        // We will enable multi-line editing if the original has a newline, or if the current custom value already has one\n        if (originalHasNewLine || this.value.indexOf(\"\\n\") !== -1) {\n            this.inputType = \"textarea\";\n        }\n    }\n\n    view(vnode) {\n        const placeholderText = this.originalString\n            ? this.originalString\n            : \"(\" +\n              app.translator.trans(\n                  \"fof-linguist.admin.placeholder.\" +\n                      (this.localeKey ? \"not-translated\" : \"all-locales\"),\n              ) +\n              \")\";\n\n        return m(\".FoF-Linguist-Locale\", [\n            m(\"label.FoF-Linguist-Label\", this.localeName()),\n            m(\n                \".FoF-Linguist-Field\",\n                {\n                    className:\n                        (this.value ? \"FoF-Linguist-Field--with-value\" : \"\") +\n                        (this.originalString\n                            ? \" FoF-Linguist-Field--with-original-string\"\n                            : \"\"),\n                    title: placeholderText,\n                },\n                [\n                    m(\".FoF-Linguist-Field-Wrap\", [\n                        m(this.inputType, {\n                            className: \"FormControl FoF-Linguist-Input\",\n                            value: this.value,\n                            oninput: (event) => {\n                                this.value = event.target.value;\n                                this.dirty = true;\n\n                                // Remove dirty state if the user erased his text without saving\n                                if (!this.value && !this.string) {\n                                    this.dirty = false;\n                                }\n                            },\n                            disabled: this.processing,\n                        }),\n                        m(\".FoF-Linguist-Placeholder\", [\n                            m(\n                                \"span.FoF-Linguist-Placeholder-Hint\",\n                                app.translator.trans(\n                                    \"fof-linguist.admin.placeholder.hint\",\n                                ),\n                            ),\n                            \" \",\n                            m(\n                                \"span\",\n                                this.originalString\n                                    ? highlightMithril(\n                                          placeholderText,\n                                          vnode.attrs.highlight,\n                                      )\n                                    : placeholderText,\n                            ),\n                        ]),\n                    ]),\n                ],\n            ),\n            m(\n                \".FoF-Linguist-Controls\",\n                this.actions(vnode.attrs.onchange).toArray(),\n            ),\n        ]);\n    }\n\n    localeName() {\n        if (this.locale) {\n            return [this.locale.name + \" (\", m(\"code\", this.locale.key), \")\"];\n        } else {\n            return app.translator.trans(\"fof-linguist.admin.locales.all\");\n        }\n    }\n\n    actions(onchange) {\n        const items = new ItemList();\n\n        items.add(\n            \"apply\",\n            Button.component(\n                {\n                    type: \"button\",\n                    className: \"Button Button--primary\",\n                    loading: this.processing,\n                    disabled: !this.dirty,\n                    onclick: () => {\n                        this.saveString(onchange);\n                    },\n                },\n                app.translator.trans(\"fof-linguist.admin.buttons.apply\"),\n            ),\n        );\n\n        items.add(\n            \"reset\",\n            Button.component(\n                {\n                    type: \"button\",\n                    className: \"Button\",\n                    loading: this.processing,\n                    disabled: !this.dirty && !this.string,\n                    onclick: () => {\n                        this.deleteString(onchange);\n                    },\n                },\n                app.translator.trans(\"fof-linguist.admin.buttons.reset\"),\n            ),\n        );\n\n        if (this.originalString) {\n            items.add(\n                \"copy-original\",\n                Button.component(\n                    {\n                        type: \"button\",\n                        className: \"Button\",\n                        loading: this.processing,\n                        onclick: () => {\n                            this.value = this.originalString;\n                            this.dirty = true;\n                        },\n                    },\n                    app.translator.trans(\n                        \"fof-linguist.admin.buttons.copy-original\",\n                    ),\n                ),\n            );\n        }\n\n        return items;\n    }\n\n    saveString(onchange) {\n        if (!this.value) {\n            this.deleteString(onchange);\n\n            return;\n        }\n\n        if (!this.string) {\n            this.string = app.store.createRecord(\"fof-linguist-string\", {\n                attributes: {\n                    key: this.stringKey.key(),\n                    locale: this.localeKey,\n                    value: \"\",\n                },\n            });\n        }\n\n        this.string.data.attributes.value = this.value;\n\n        if (!this.string.locale()) delete this.string.data.attributes.locale;\n\n        this.processing = true;\n\n        this.string\n            .save(this.string.data.attributes)\n            .then(() => {\n                this.processing = false;\n                this.dirty = false;\n\n                onchange();\n\n                m.redraw();\n            })\n            .catch((err) => {\n                this.processing = false;\n\n                throw err;\n            });\n    }\n\n    deleteString(onchange) {\n        if (this.string) {\n            this.processing = true;\n\n            this.string\n                .delete()\n                .then(() => {\n                    this.processing = false;\n                    this.dirty = false;\n\n                    this.string = null;\n                    this.value = \"\";\n\n                    onchange();\n\n                    m.redraw();\n                })\n                .catch((err) => {\n                    this.processing = false;\n\n                    throw err;\n                });\n        } else {\n            this.value = \"\";\n            this.dirty = false;\n        }\n    }\n}\n","import StringLocale from \"../components/StringLocale\";\nimport localesAsArray from \"../utils/localesAsArray\";\nimport highlightMithril from \"../utils/highlightMithril\";\n\n/* global m */\n\nexport default class StringKey {\n    view(vnode) {\n        const { stringKey, highlight, onchange } = vnode.attrs;\n\n        return m(\".FoF-Linguist-Key\", [\n            m(\n                \".FoF-Linguist-Key-Code\",\n                m(\"code\", highlightMithril(stringKey.key(), highlight)),\n            ),\n            m(\".FoF-Linguist-Locales\", [\n                ...localesAsArray().map((locale) =>\n                    m(StringLocale, {\n                        key: locale.key,\n                        locale,\n                        stringKey,\n                        highlight,\n                        onchange,\n                    }),\n                ),\n                m(StringLocale, {\n                    key: \"all\",\n                    locale: null,\n                    stringKey,\n                    highlight,\n                    onchange,\n                }),\n            ]),\n        ]);\n    }\n}\n","import app from \"flarum/admin/app\";\n\nexport default function (namespace) {\n    const translation =\n        app.translator.translations[\n            \"fof-linguist.admin.known-namespace.\" + namespace\n        ];\n\n    if (translation) {\n        return translation;\n    }\n\n    return namespace;\n}\n","import app from \"flarum/admin/app\";\n\nexport default function (frontend) {\n    const translation =\n        app.translator.translations[\n            \"fof-linguist.admin.known-frontend.\" + frontend\n        ];\n\n    if (translation) {\n        return translation;\n    }\n\n    return frontend;\n}\n","export default function (operation, booleans) {\n    return booleans.reduce((a, b) => {\n        if (a === \"start\") {\n            return b;\n        }\n\n        if (operation === \"or\") {\n            return a || b;\n        }\n\n        return a && b;\n    }, \"start\");\n}\n","import app from \"flarum/admin/app\";\nimport Button from \"flarum/common/components/Button\";\nimport Dropdown from \"flarum/common/components/Dropdown\";\nimport Select from \"flarum/common/components/Select\";\nimport Alert from \"flarum/common/components/Alert\";\nimport LoadingModal from \"flarum/admin/components/LoadingModal\";\nimport extractText from \"flarum/common/utils/extractText\";\nimport localesAsArray from \"../utils/localesAsArray\";\nimport StringKey from \"../components/StringKey\";\nimport namespaceLabel from \"../utils/namespaceLabel\";\nimport frontendLabel from \"../utils/frontendLabel\";\nimport booleanCheck from \"../utils/booleanCheck\";\n\n/* global m */\n\nconst RESULTS_PER_PAGE = 20;\n\nexport default class StringsPage {\n    oninit(vnode) {\n        this.numberOfResultsToShow = RESULTS_PER_PAGE;\n\n        this.filters = Object.assign(\n            {\n                search: \"\",\n                withOwnTranslations: false,\n                missingTranslationsNegation: \"without\",\n                missingTranslationsType: \"any\",\n                missingTranslationsOperation: \"or\",\n                missingTranslationsInLocales: [],\n                forExtension: null,\n                frontend: null,\n            },\n            vnode.attrs.initialBrowseFilters || {},\n        );\n\n        this.results = [];\n\n        this.applyFilters();\n    }\n\n    view(vnode) {\n        const keys = this.results.slice(0, this.numberOfResultsToShow);\n\n        return [\n            // Additional divs are used to reduce Mithril redraws as much as possible when the conditional components appear\n            m(\"div\", this.cacheClearInstructions()),\n            m(\".FoF-Linguist-Filters\", [\n                m(\"input.FormControl\", {\n                    value: this.filters.search,\n                    oninput: (event) => {\n                        this.filters.search = event.target.value;\n                        this.applyFilters();\n                    },\n                    placeholder: app.translator.trans(\n                        \"fof-linguist.admin.filters.search\",\n                    ),\n                }),\n                Button.component(\n                    {\n                        className:\n                            \"Button\" +\n                            (this.filters.withOwnTranslations\n                                ? \" FoF-Linguist-Filter--Selected\"\n                                : \"\"),\n                        icon: `far fa-${\n                            this.filters.withOwnTranslations\n                                ? \"check-square\"\n                                : \"square\"\n                        }`,\n                        onclick: () => {\n                            this.filters.withOwnTranslations =\n                                !this.filters.withOwnTranslations;\n                            this.applyFilters();\n                        },\n                    },\n                    app.translator.trans(\n                        \"fof-linguist.admin.filters.with-own-translations\",\n                    ),\n                ),\n                Dropdown.component(\n                    {\n                        buttonClassName:\n                            \"Button\" +\n                            (this.filters.forExtension\n                                ? \" FoF-Linguist-Filter--Selected\"\n                                : \"\"),\n                        label: app.translator.trans(\n                            \"fof-linguist.admin.filters.for-extension\",\n                        ),\n                    },\n                    vnode.attrs.namespaces.map((namespace) =>\n                        Button.component(\n                            {\n                                className: \"Button\",\n                                icon: `far fa-${\n                                    this.filters.forExtension ===\n                                    namespace.namespace\n                                        ? \"dot-circle\"\n                                        : \"circle\"\n                                }`,\n                                onclick: () => {\n                                    if (\n                                        this.filters.forExtension ===\n                                        namespace.namespace\n                                    ) {\n                                        this.filters.forExtension = null;\n                                    } else {\n                                        this.filters.forExtension =\n                                            namespace.namespace;\n                                    }\n\n                                    this.applyFilters();\n                                },\n                            },\n                            namespace.extension\n                                ? namespace.extension.extra[\"flarum-extension\"]\n                                      .title\n                                : namespaceLabel(namespace.namespace),\n                        ),\n                    ),\n                ),\n                Dropdown.component(\n                    {\n                        buttonClassName:\n                            \"Button\" +\n                            (this.filters.frontend\n                                ? \" FoF-Linguist-Filter--Selected\"\n                                : \"\"),\n                        label: app.translator.trans(\n                            \"fof-linguist.admin.filters.frontend\",\n                        ),\n                    },\n                    [\"_all_except_admin\", ...vnode.attrs.frontends].map(\n                        (frontend) =>\n                            Button.component(\n                                {\n                                    className: \"Button\",\n                                    icon: `far fa-${\n                                        this.filters.frontend === frontend\n                                            ? \"dot-circle\"\n                                            : \"circle\"\n                                    }`,\n                                    onclick: () => {\n                                        if (\n                                            this.filters.frontend === frontend\n                                        ) {\n                                            this.filters.frontend = null;\n                                        } else {\n                                            this.filters.frontend = frontend;\n                                        }\n\n                                        this.applyFilters();\n                                    },\n                                },\n                                frontend === \"_all_except_admin\"\n                                    ? app.translator.trans(\n                                          \"fof-linguist.admin.filters.frontend-all-except-admin\",\n                                      )\n                                    : frontendLabel(frontend),\n                            ),\n                    ),\n                ),\n                Dropdown.component(\n                    {\n                        buttonClassName:\n                            \"Button\" +\n                            (this.filters.missingTranslationsInLocales.length\n                                ? \" FoF-Linguist-Filter--Selected\"\n                                : \"\"),\n                        label: app.translator.trans(\n                            \"fof-linguist.admin.filters.missing\",\n                        ),\n                    },\n                    [\n                        m(\n                            \".FoF-Linguist-Missing-Filter\",\n                            {\n                                onclick(event) {\n                                    // Prevent closing the dropdown\n                                    event.stopPropagation();\n                                },\n                            },\n                            [\n                                Select.component({\n                                    value: this.filters\n                                        .missingTranslationsNegation,\n                                    onchange: (value) => {\n                                        this.filters.missingTranslationsNegation =\n                                            value;\n\n                                        if (\n                                            this.filters\n                                                .missingTranslationsInLocales\n                                                .length\n                                        ) {\n                                            this.applyFilters();\n                                        }\n                                    },\n                                    options: {\n                                        without: app.translator.trans(\n                                            \"fof-linguist.admin.filters.negation-options.without\",\n                                        ),\n                                        with: app.translator.trans(\n                                            \"fof-linguist.admin.filters.negation-options.with\",\n                                        ),\n                                    },\n                                }),\n                                Select.component({\n                                    value: this.filters.missingTranslationsType,\n                                    onchange: (value) => {\n                                        this.filters.missingTranslationsType =\n                                            value;\n\n                                        if (\n                                            this.filters\n                                                .missingTranslationsInLocales\n                                                .length\n                                        ) {\n                                            this.applyFilters();\n                                        }\n                                    },\n                                    options: {\n                                        any: app.translator.trans(\n                                            \"fof-linguist.admin.filters.type-options.any\",\n                                        ),\n                                        original: app.translator.trans(\n                                            \"fof-linguist.admin.filters.type-options.original\",\n                                        ),\n                                        own: app.translator.trans(\n                                            \"fof-linguist.admin.filters.type-options.own\",\n                                        ),\n                                    },\n                                }),\n                                m(\n                                    \"p\",\n                                    app.translator.trans(\n                                        \"fof-linguist.admin.filters.missing-middle-label\",\n                                    ),\n                                ),\n                                Select.component({\n                                    value: this.filters\n                                        .missingTranslationsOperation,\n                                    onchange: (value) => {\n                                        this.filters.missingTranslationsOperation =\n                                            value;\n\n                                        if (\n                                            this.filters\n                                                .missingTranslationsInLocales\n                                                .length\n                                        ) {\n                                            this.applyFilters();\n                                        }\n                                    },\n                                    options: {\n                                        or: app.translator.trans(\n                                            \"fof-linguist.admin.filters.operation-options.or\",\n                                        ),\n                                        and: app.translator.trans(\n                                            \"fof-linguist.admin.filters.operation-options.and\",\n                                        ),\n                                    },\n                                }),\n                            ],\n                        ),\n                        ...localesAsArray().map((locale) =>\n                            Button.component(\n                                {\n                                    className: \"Button\",\n                                    icon: `far fa-${\n                                        this.filters.missingTranslationsInLocales.indexOf(\n                                            locale.key,\n                                        ) !== -1\n                                            ? \"check-square\"\n                                            : \"square\"\n                                    }`,\n                                    onclick: () => {\n                                        if (\n                                            this.filters.missingTranslationsInLocales.indexOf(\n                                                locale.key,\n                                            ) !== -1\n                                        ) {\n                                            this.filters.missingTranslationsInLocales =\n                                                this.filters.missingTranslationsInLocales.filter(\n                                                    (key) => key !== locale.key,\n                                                );\n                                        } else {\n                                            this.filters.missingTranslationsInLocales.push(\n                                                locale.key,\n                                            );\n                                        }\n\n                                        this.applyFilters();\n                                    },\n                                },\n                                locale.name + \" (\" + locale.key + \")\",\n                            ),\n                        ),\n                    ],\n                ),\n                Dropdown.component(\n                    {\n                        buttonClassName: \"Button\",\n                        label: app.translator.trans(\n                            \"fof-linguist.admin.filters.mass-edit\",\n                        ),\n                    },\n                    [\n                        Button.component(\n                            {\n                                icon: \"far fa-clone\",\n                                className: \"Button\",\n                                onclick: () => {\n                                    const strings = app.store\n                                        .all(\"fof-linguist-string\")\n                                        .filter((string) => {\n                                            const key = app.store.getById(\n                                                \"fof-linguist-string-key\",\n                                                string.key(),\n                                            );\n\n                                            return (\n                                                key &&\n                                                key.locales()[\n                                                    string.locale()\n                                                ] === string.value()\n                                            );\n                                        });\n\n                                    if (\n                                        confirm(\n                                            extractText(\n                                                app.translator.trans(\n                                                    \"fof-linguist.admin.buttons.delete-redundant-confirm\",\n                                                    {\n                                                        count:\n                                                            strings.length + \"\",\n                                                    },\n                                                ),\n                                            ),\n                                        )\n                                    ) {\n                                        if (strings.length === 0) {\n                                            return;\n                                        }\n\n                                        app.modal.show(LoadingModal);\n\n                                        Promise.all(\n                                            strings.map((string) =>\n                                                string.delete(),\n                                            ),\n                                        ).then(() => {\n                                            window.location.reload();\n                                        });\n                                    }\n                                },\n                            },\n                            app.translator.trans(\n                                \"fof-linguist.admin.buttons.delete-redundant\",\n                            ),\n                        ),\n                        Button.component(\n                            {\n                                icon: \"fas fa-trash\",\n                                className: \"Button\",\n                                onclick: () => {\n                                    const strings = app.store.all(\n                                        \"fof-linguist-string\",\n                                    );\n\n                                    if (\n                                        confirm(\n                                            extractText(\n                                                app.translator.trans(\n                                                    \"fof-linguist.admin.buttons.delete-all-confirm\",\n                                                    {\n                                                        count:\n                                                            strings.length + \"\",\n                                                    },\n                                                ),\n                                            ),\n                                        )\n                                    ) {\n                                        if (strings.length === 0) {\n                                            return;\n                                        }\n\n                                        app.modal.show(LoadingModal);\n\n                                        Promise.all(\n                                            strings.map((string) =>\n                                                string.delete(),\n                                            ),\n                                        ).then(() => {\n                                            window.location.reload();\n                                        });\n                                    }\n                                },\n                            },\n                            app.translator.trans(\n                                \"fof-linguist.admin.buttons.delete-all\",\n                            ),\n                        ),\n                    ],\n                ),\n            ]),\n            m(\n                \"div\",\n                keys.map((stringKey) =>\n                    m(StringKey, {\n                        key: stringKey.id(),\n                        stringKey,\n                        highlight: this.filters.search,\n                        onchange: () => {\n                            // We use the setting and not a local variable because we need to preserve state\n                            // if we navigate away and back to the Linguist page without refreshing the admin panel\n                            app.data.settings[\n                                \"fof.linguist.should-clear-cache\"\n                            ] = \"1\";\n                        },\n                    }),\n                ),\n            ),\n            m(\".FoF-Linguist-Results\", [\n                app.translator.trans(\"fof-linguist.admin.filters.results\", {\n                    shown: keys.length + \"\", // cast to string otherwise number isn't displayed\n                    total: this.results.length + \"\",\n                }),\n                \" \",\n                this.results.length > keys.length\n                    ? Button.component(\n                          {\n                              className: \"Button\",\n                              onclick: () => {\n                                  this.numberOfResultsToShow +=\n                                      RESULTS_PER_PAGE;\n                              },\n                          },\n                          app.translator.trans(\n                              \"fof-linguist.admin.buttons.load-more\",\n                          ),\n                      )\n                    : null,\n            ]),\n        ];\n    }\n\n    applyFilters() {\n        this.numberOfResultsToShow = RESULTS_PER_PAGE;\n\n        const keysWithCustomTranslations = app.store\n            .all(\"fof-linguist-string\")\n            .map((string) => string.key());\n\n        const keysWithCustomTranslationsIn = {};\n        localesAsArray().forEach((locale) => {\n            keysWithCustomTranslationsIn[locale.key] = app.store\n                .all(\"fof-linguist-string\")\n                .filter((string) => string.locale() === locale.key)\n                .map((string) => string.key());\n        });\n\n        let lowercaseSearch = \"\";\n\n        if (this.filters.search) {\n            lowercaseSearch = this.filters.search.toLowerCase();\n        }\n\n        this.results = app.store\n            .all(\"fof-linguist-string-key\")\n            .filter((key) => {\n                if (\n                    this.filters.withOwnTranslations &&\n                    keysWithCustomTranslations.indexOf(key.key()) === -1\n                ) {\n                    return false;\n                }\n\n                if (this.filters.missingTranslationsInLocales.length) {\n                    let operation = this.filters.missingTranslationsOperation;\n\n                    // Because the whole operation is reversed at the end based on with or without,\n                    // we actually need to make the opposite boolean computation on the \"has<x>\" variables\n                    if (\n                        this.filters.missingTranslationsNegation === \"without\"\n                    ) {\n                        operation = operation === \"or\" ? \"and\" : \"or\";\n                    }\n\n                    const hasOriginalTranslation = booleanCheck(\n                        operation,\n                        this.filters.missingTranslationsInLocales.map(\n                            (locale) => {\n                                return key.locales().hasOwnProperty(locale);\n                            },\n                        ),\n                    );\n                    const hasOwnTranslation = booleanCheck(\n                        operation,\n                        this.filters.missingTranslationsInLocales.map(\n                            (locale) => {\n                                return (\n                                    keysWithCustomTranslationsIn[\n                                        locale\n                                    ].indexOf(key.key()) !== -1\n                                );\n                            },\n                        ),\n                    );\n\n                    let matchesType = false;\n\n                    switch (this.filters.missingTranslationsType) {\n                        case \"any\":\n                            matchesType =\n                                hasOriginalTranslation || hasOwnTranslation;\n                            break;\n                        case \"original\":\n                            matchesType = hasOriginalTranslation;\n                            break;\n                        case \"own\":\n                            matchesType = hasOwnTranslation;\n                            break;\n                    }\n\n                    if (\n                        this.filters.missingTranslationsNegation === \"without\"\n                    ) {\n                        matchesType = !matchesType;\n                    }\n\n                    if (!matchesType) {\n                        return false;\n                    }\n                }\n\n                if (this.filters.forExtension) {\n                    if (\n                        key.key().indexOf(this.filters.forExtension + \".\") !== 0\n                    ) {\n                        return false;\n                    }\n                }\n\n                if (this.filters.frontend) {\n                    const parts = key.key().split(\".\");\n\n                    if (this.filters.frontend === \"_all_except_admin\") {\n                        // We will keep everything that isn't admin, including if it's a single level deep\n                        if (parts.length >= 2 && parts[1] === \"admin\") {\n                            return false;\n                        }\n                    } else {\n                        // Keep only parts with 2 levels or more where second level matches frontend\n                        if (\n                            parts.length < 2 ||\n                            parts[1] !== this.filters.frontend\n                        ) {\n                            return false;\n                        }\n                    }\n                }\n\n                if (lowercaseSearch) {\n                    if (\n                        key.key().toLowerCase().indexOf(lowercaseSearch) !== -1\n                    ) {\n                        return true;\n                    }\n\n                    const locales = key.locales();\n\n                    for (let locale in locales) {\n                        if (\n                            locales.hasOwnProperty(locale) &&\n                            locales[locale]\n                                .toLowerCase()\n                                .indexOf(lowercaseSearch) !== -1\n                        ) {\n                            return true;\n                        }\n                    }\n\n                    return false;\n                }\n\n                return true;\n            });\n\n        m.redraw();\n    }\n\n    cacheClearInstructions() {\n        // If debug is enabled, we hide the message here because even if we stop setting the flag,\n        // an older flag might still be present from before debug mode was enabled\n        if (app.data.debugEnabled) {\n            return null;\n        }\n\n        // Check for flag that says cache should be cleared\n        // This value is set both server-side and client-side in the onchange code above for immediate effect\n        if (app.data.settings[\"fof.linguist.should-clear-cache\"] !== \"1\") {\n            return null;\n        }\n\n        return Alert.component(\n            {\n                dismissible: false,\n                controls: [\n                    Button.component(\n                        {\n                            className: \"Button Button--link\",\n                            onclick() {\n                                // Same logic as in core StatusWidget\n                                app.modal.show(LoadingModal);\n\n                                app.request({\n                                    method: \"DELETE\",\n                                    url:\n                                        app.forum.attribute(\"apiUrl\") +\n                                        \"/cache\",\n                                }).then(() => window.location.reload());\n                            },\n                        },\n                        app.translator.trans(\n                            \"fof-linguist.admin.clear-cache.button\",\n                        ),\n                    ),\n                ],\n            },\n            app.translator.trans(\"fof-linguist.admin.clear-cache.text\"),\n        );\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import app from \"flarum/admin/app\";\nimport Button from \"flarum/common/components/Button\";\nimport icon from \"flarum/common/helpers/icon\";\nimport localesAsArray from \"../utils/localesAsArray\";\nimport namespaceLabel from \"../utils/namespaceLabel\";\nimport frontendLabel from \"../utils/frontendLabel\";\n\n/* global m */\n\nexport default class CoveragePage {\n    oninit() {\n        this.columns = \"locale\";\n        this.showAllFrontends = false;\n        this.totalPercent = true;\n        this.locale = [];\n\n        const firstNonEnglishLocale = localesAsArray().find(\n            (locale) => locale.key !== \"en\",\n        );\n\n        if (firstNonEnglishLocale) {\n            this.locale = firstNonEnglishLocale.key;\n        }\n    }\n\n    view(vnode) {\n        let visibleFrontends = vnode.attrs.frontends.slice(0, 2);\n\n        if (this.showAllFrontends) {\n            visibleFrontends = vnode.attrs.frontends;\n        }\n\n        const { browseWithFilters } = vnode.attrs;\n\n        return [\n            m(\".FoF-Linguist-Filters\", [\n                m(\".ButtonGroup\", [\n                    Button.component(\n                        {\n                            className:\n                                \"Button\" + (this.totalPercent ? \" active\" : \"\"),\n                            onclick: () => {\n                                this.totalPercent = true;\n                            },\n                        },\n                        app.translator.trans(\n                            \"fof-linguist.admin.coverage.total-options.percent\",\n                        ),\n                    ),\n                    Button.component(\n                        {\n                            className:\n                                \"Button\" +\n                                (this.totalPercent ? \" \" : \" active\"),\n                            onclick: () => {\n                                this.totalPercent = false;\n                            },\n                        },\n                        app.translator.trans(\n                            \"fof-linguist.admin.coverage.total-options.count\",\n                        ),\n                    ),\n                ]),\n                m(\".ButtonGroup\", [\n                    Button.component(\n                        {\n                            className:\n                                \"Button\" +\n                                (this.columns === \"locale\" ? \" active\" : \"\"),\n                            onclick: () => {\n                                this.columns = \"locale\";\n                            },\n                        },\n                        app.translator.trans(\n                            \"fof-linguist.admin.coverage.column-options.locale\",\n                        ),\n                    ),\n                    Button.component(\n                        {\n                            className:\n                                \"Button\" +\n                                (this.columns === \"namespace\" ? \" active\" : \"\"),\n                            onclick: () => {\n                                this.columns = \"namespace\";\n                                this.showAllFrontends = false;\n                            },\n                        },\n                        app.translator.trans(\n                            \"fof-linguist.admin.coverage.column-options.namespace\",\n                        ),\n                    ),\n                ]),\n                this.columns === \"namespace\"\n                    ? m(\n                          \".ButtonGroup\",\n                          localesAsArray().map((locale) =>\n                              Button.component(\n                                  {\n                                      className:\n                                          \"Button\" +\n                                          (this.locale === locale.key\n                                              ? \" active\"\n                                              : \"\"),\n                                      onclick: () => {\n                                          if (this.locale !== locale.key) {\n                                              this.locale = locale.key;\n                                          }\n                                      },\n                                  },\n                                  locale.name + \" (\" + locale.key + \")\",\n                              ),\n                          ),\n                      )\n                    : null,\n            ]),\n            m(\"table.FoF-Linguist-Coverage\", [\n                m(\n                    \"thead\",\n                    m(\"tr\", [\n                        m(\n                            \"th\",\n                            app.translator.trans(\n                                \"fof-linguist.admin.coverage.columns.namespace\",\n                            ),\n                        ),\n                        this.columns === \"locale\"\n                            ? localesAsArray().map((locale) =>\n                                  m(\n                                      \"th\",\n                                      locale.name + \" (\" + locale.key + \")\",\n                                  ),\n                              )\n                            : [\n                                  this.showAllFrontends\n                                      ? visibleFrontends.map((frontend) =>\n                                            m(\"th\", frontendLabel(frontend)),\n                                        )\n                                      : [\n                                            m(\n                                                \"th\",\n                                                app.translator.trans(\n                                                    \"fof-linguist.admin.coverage.columns.all-except-admin\",\n                                                ),\n                                            ),\n                                            m(\"th\", frontendLabel(\"admin\")),\n                                            m(\n                                                \"th\",\n                                                Button.component(\n                                                    {\n                                                        className: \"Button\",\n                                                        onclick: () => {\n                                                            this.showAllFrontends = true;\n                                                        },\n                                                    },\n                                                    app.translator.trans(\n                                                        \"fof-linguist.admin.coverage.columns.all-frontends\",\n                                                    ),\n                                                ),\n                                            ),\n                                        ],\n                              ],\n                    ]),\n                ),\n                m(\"tbody\", [\n                    this.columns === \"locale\"\n                        ? m(\"tr\", [\n                              m(\"td\", [\n                                  m(\n                                      \"span.FoF-Linguist-Coverage-Extension-Icon.FoF-Linguist-Coverage-Namespace-Icon\",\n                                  ),\n                                  m(\n                                      \"span.FoF-Linguist-Coverage-Extension-Title\",\n                                      app.translator.trans(\n                                          \"fof-linguist.admin.coverage.all-namespaces\",\n                                      ),\n                                  ),\n                              ]),\n                              localesAsArray().map((locale) =>\n                                  m(\n                                      \"td\",\n                                      this.localeCoverage(\n                                          browseWithFilters,\n                                          locale.key,\n                                      ),\n                                  ),\n                              ),\n                          ])\n                        : null,\n                    vnode.attrs.namespaces.map((namespace) => {\n                        return m(\"tr\", [\n                            m(\n                                \"td\",\n                                namespace.extension\n                                    ? [\n                                          m(\n                                              \"span.FoF-Linguist-Coverage-Extension-Icon\",\n                                              {\n                                                  style: namespace.extension\n                                                      .icon,\n                                              },\n                                              namespace.extension.icon\n                                                  ? icon(\n                                                        namespace.extension.icon\n                                                            .name,\n                                                    )\n                                                  : \"\",\n                                          ),\n                                          m(\n                                              \"span.FoF-Linguist-Coverage-Extension-Title\",\n                                              namespace.extension.extra[\n                                                  \"flarum-extension\"\n                                              ].title,\n                                          ),\n                                      ]\n                                    : [\n                                          m(\n                                              \"span.FoF-Linguist-Coverage-Extension-Icon.FoF-Linguist-Coverage-Namespace-Icon\",\n                                          ),\n                                          m(\n                                              \"span.FoF-Linguist-Coverage-Extension-Title\",\n                                              namespaceLabel(\n                                                  namespace.namespace,\n                                              ),\n                                          ),\n                                      ],\n                            ),\n                            this.columns === \"locale\"\n                                ? localesAsArray().map((locale) =>\n                                      m(\n                                          \"td\",\n                                          this.localeCoverage(\n                                              browseWithFilters,\n                                              locale.key,\n                                              namespace.namespace,\n                                          ),\n                                      ),\n                                  )\n                                : [\n                                      this.showAllFrontends\n                                          ? visibleFrontends.map((frontend) =>\n                                                m(\n                                                    \"td\",\n                                                    this.prefixCoverage(\n                                                        browseWithFilters,\n                                                        namespace.namespace,\n                                                        frontend,\n                                                    ),\n                                                ),\n                                            )\n                                          : [\n                                                m(\n                                                    \"td\",\n                                                    this.prefixCoverage(\n                                                        browseWithFilters,\n                                                        namespace.namespace,\n                                                        \"_all_except_admin\",\n                                                    ),\n                                                ),\n                                                m(\n                                                    \"td\",\n                                                    this.prefixCoverage(\n                                                        browseWithFilters,\n                                                        namespace.namespace,\n                                                        \"admin\",\n                                                    ),\n                                                ),\n                                            ],\n                                  ],\n                        ]);\n                    }),\n                ]),\n            ]),\n        ];\n    }\n\n    prefixCoverage(browseWithFilters, namespace, frontend) {\n        if (!this.locale) {\n            return null;\n        }\n\n        return this.localeCoverage(\n            browseWithFilters,\n            this.locale,\n            namespace,\n            frontend,\n        );\n    }\n\n    localeCoverage(browseWithFilters, locale, namespace, frontend) {\n        const stringKeys = app.store\n            .all(\"fof-linguist-string-key\")\n            .filter((key) => {\n                if (!namespace) {\n                    return true;\n                }\n\n                const parts = key.key().split(\".\");\n\n                if (parts[0] !== namespace) {\n                    return false;\n                }\n\n                if (frontend === \"_all_except_admin\") {\n                    if (parts.length >= 2 && parts[1] === \"admin\") {\n                        return false;\n                    }\n                } else if (\n                    frontend &&\n                    (parts.length < 2 || parts[1] !== frontend)\n                ) {\n                    return false;\n                }\n\n                return true;\n            });\n\n        if (stringKeys.length === 0) {\n            return \"-\";\n        }\n\n        let customCount = 0;\n        let originalCount = 0;\n\n        stringKeys.forEach((stringKey) => {\n            const customString = app.store\n                .all(\"fof-linguist-string\")\n                .find(\n                    (string) =>\n                        string.key() === stringKey.key() &&\n                        string.locale() === locale,\n                );\n\n            if (customString) {\n                customCount++;\n            } else if (stringKey.locales().hasOwnProperty(locale)) {\n                originalCount++;\n            }\n        });\n\n        const percent = Math.round(\n            ((customCount + originalCount) / stringKeys.length) * 100,\n        );\n\n        let specialStyle;\n\n        if (percent === 100) {\n            specialStyle = \"full\";\n        } else if (percent < 5) {\n            specialStyle = \"low\";\n        }\n\n        let label;\n\n        if (this.totalPercent) {\n            label = app.translator.trans(\n                \"fof-linguist.admin.coverage.count.percent\",\n                {\n                    percent: percent + \"\", // Keeps zero as string\n                },\n            );\n        } else {\n            label = app.translator.trans(\n                \"fof-linguist.admin.coverage.count.total\",\n                {\n                    translated: customCount + originalCount + \"\", // Keeps zero as string\n                    total: stringKeys.length,\n                },\n            );\n        }\n\n        return m(\".FoF-Linguist-Coverage-Progress-Wrap\", [\n            m(\n                \".FoF-Linguist-Progress\",\n                {\n                    className: specialStyle\n                        ? \"FoF-Linguist-Progress--\" + specialStyle\n                        : \"\",\n                },\n                [\n                    m(\".FoF-Linguist-Progress-Bar\", {\n                        style: {\n                            width: Math.max(percent, 5) + \"%\", // Always show the progress bar even if very close to 0\n                        },\n                    }),\n                    m(\".FoF-Linguist-Progress-Label\", label),\n                    m(\n                        \".FoF-Linguist-Progress-More\",\n                        app.translator.trans(\n                            \"fof-linguist.admin.coverage.count.details\",\n                            {\n                                total: stringKeys.length,\n                                original: originalCount + \"\", // Cast to string to preserve zero\n                                custom: customCount + \"\",\n                            },\n                        ),\n                    ),\n                ],\n            ),\n            Button.component({\n                icon: \"fas fa-filter\",\n                className: \"Button Button--icon\",\n                onclick: () => {\n                    const options = {\n                        missingTranslationsInLocales: [locale],\n                    };\n\n                    if (namespace) {\n                        options.forExtension = namespace;\n                    }\n\n                    if (frontend) {\n                        options.frontend = frontend;\n                    }\n\n                    browseWithFilters(options);\n                },\n                title: app.translator.trans(\n                    \"fof-linguist.admin.coverage.apply-missing-filter\",\n                ),\n            }),\n        ]);\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","import app from \"flarum/admin/app\";\nimport Select from \"flarum/common/components/Select\";\nimport Switch from \"flarum/common/components/Switch\";\nimport LinkButton from \"flarum/common/components/LinkButton\";\nimport localesAsArray from \"../utils/localesAsArray\";\nimport namespaceLabel from \"../utils/namespaceLabel\";\n\n/* global m */\n\nexport default class ExportPage {\n    oninit() {\n        this.locale = \"en\";\n        this.namespace = null;\n        this.includeOriginals = false;\n        this.includeAll = false;\n        this.loading = false;\n        this.output = \"\";\n\n        this.fetchOutput();\n    }\n\n    view(vnode) {\n        const localeOptions = {};\n\n        localesAsArray().forEach((locale) => {\n            localeOptions[locale.key] = locale.name + \" (\" + locale.key + \")\";\n        });\n\n        localeOptions.all = app.translator.trans(\n            \"fof-linguist.admin.export.locale-all\",\n        );\n\n        const namespaceOptions = {\n            _all: app.translator.trans(\n                \"fof-linguist.admin.export.namespace-all\",\n            ),\n        };\n\n        vnode.attrs.namespaces.forEach((namespace) => {\n            if (namespace.extension) {\n                namespaceOptions[namespace.namespace] =\n                    namespace.extension.extra[\"flarum-extension\"].title;\n            } else {\n                namespaceOptions[namespace.namespace] = namespaceLabel(\n                    namespace.namespace,\n                );\n            }\n        });\n\n        return [\n            m(\"h2\", app.translator.trans(\"fof-linguist.admin.export.title\")),\n            m(\n                \".Form-group\",\n                m(\n                    \".Alert\",\n                    app.translator.trans(\"fof-linguist.admin.export.warning\"),\n                ),\n            ),\n            m(\".Form-group\", [\n                m(\n                    \"label\",\n                    app.translator.trans(\"fof-linguist.admin.export.locale\"),\n                ),\n                Select.component({\n                    options: localeOptions,\n                    value: this.locale,\n                    onchange: (value) => {\n                        this.locale = value;\n\n                        this.fetchOutput();\n                    },\n                }),\n            ]),\n            m(\".Form-group\", [\n                m(\n                    \"label\",\n                    app.translator.trans(\"fof-linguist.admin.export.namespace\"),\n                ),\n                Select.component({\n                    options: namespaceOptions,\n                    value: this.namespace === null ? \"_all\" : this.namespace,\n                    onchange: (value) => {\n                        this.namespace = value === \"_all\" ? null : value;\n\n                        this.fetchOutput();\n                    },\n                }),\n            ]),\n            m(\".Form-group\", [\n                Switch.component(\n                    {\n                        state: this.includeOriginals,\n                        onchange: (value) => {\n                            this.includeOriginals = value;\n\n                            this.fetchOutput();\n                        },\n                    },\n                    app.translator.trans(\n                        \"fof-linguist.admin.export.include-originals\",\n                    ),\n                ),\n            ]),\n            m(\".Form-group\", [\n                Switch.component(\n                    {\n                        state: this.includeAll,\n                        onchange: (value) => {\n                            this.includeAll = value;\n\n                            this.fetchOutput();\n                        },\n                    },\n                    app.translator.trans(\n                        \"fof-linguist.admin.export.include-all\",\n                    ),\n                ),\n            ]),\n            m(\".Form-group\", [\n                m(\"label\", [\n                    app.translator.trans(\"fof-linguist.admin.export.output\"),\n                    \" \",\n                    LinkButton.component(\n                        {\n                            className: \"Button Button--primary\",\n                            href: this.exportUrl(),\n                            external: true,\n                            // If a namespace is selected, we use it as filename (language pack convention)\n                            // otherwise we use the locale as filename (extension convention)\n                            download: (this.namespace || this.locale) + \".yml\",\n                        },\n                        app.translator.trans(\n                            \"fof-linguist.admin.export.download\",\n                        ),\n                    ),\n                ]),\n                m(\"textarea.FormControl.FoF-Export-Textarea\", {\n                    readonly: true,\n                    value: this.output,\n                    rows: 10,\n                    placeholder: this.loading\n                        ? app.translator.trans(\n                              \"fof-linguist.admin.export.output-loading\",\n                          )\n                        : app.translator.trans(\n                              \"fof-linguist.admin.export.output-empty\",\n                          ),\n                }),\n            ]),\n        ];\n    }\n\n    exportUrl() {\n        return (\n            app.forum.attribute(\"apiUrl\") +\n            \"/fof/linguist/export?\" +\n            m.buildQueryString({\n                locale: this.locale,\n                namespace: this.namespace,\n                includeOriginals: this.includeOriginals ? \"1\" : \"0\",\n                includeAll: this.includeAll ? \"1\" : \"0\",\n            })\n        );\n    }\n\n    fetchOutput() {\n        this.loading = true;\n        this.output = \"\";\n\n        app.request({\n            method: \"GET\",\n            url: this.exportUrl(),\n            // Flarum doesn't support a raw to have the raw text response\n            // So we'll encode the response with JSON so Flarum can parse if afterwards\n            extract: (raw) => JSON.stringify(raw),\n        })\n            .then((output) => {\n                this.loading = false;\n                this.output = output;\n                m.redraw();\n            })\n            .catch((error) => {\n                this.loading = false;\n                m.redraw();\n                throw error;\n            });\n    }\n}\n","import app from \"flarum/admin/app\";\nimport Button from \"flarum/common/components/Button\";\nimport Select from \"flarum/common/components/Select\";\nimport Switch from \"flarum/common/components/Switch\";\nimport extractText from \"flarum/common/utils/extractText\";\nimport localesAsArray from \"../utils/localesAsArray\";\n\n/* global m */\n\nexport default class ImportPage {\n    oninit() {\n        this.locale = \"en\";\n        this.overrideExisting = true;\n        this.input = \"\";\n        this.loading = false;\n    }\n\n    view() {\n        const localeOptions = {};\n\n        localesAsArray().forEach((locale) => {\n            localeOptions[locale.key] = locale.name + \" (\" + locale.key + \")\";\n        });\n\n        localeOptions.all = app.translator.trans(\n            \"fof-linguist.admin.import.locale-all\",\n        );\n\n        return [\n            m(\"h2\", app.translator.trans(\"fof-linguist.admin.import.title\")),\n            m(\".Form-group\", [\n                m(\n                    \"label\",\n                    app.translator.trans(\"fof-linguist.admin.import.input\"),\n                ),\n                m(\"textarea.FormControl\", {\n                    value: this.input,\n                    oninput: (event) => {\n                        this.input = event.target.value;\n                    },\n                    rows: 10,\n                    placeholder: app.translator.trans(\n                        \"fof-linguist.admin.import.input-placeholder\",\n                    ),\n                }),\n            ]),\n            m(\".Form-group\", [\n                m(\n                    \"label\",\n                    app.translator.trans(\"fof-linguist.admin.import.locale\"),\n                ),\n                Select.component({\n                    options: localeOptions,\n                    value: this.locale,\n                    onchange: (value) => {\n                        this.locale = value;\n\n                        this.fetchOutput();\n                    },\n                }),\n            ]),\n            m(\".Form-group\", [\n                Switch.component(\n                    {\n                        state: this.overrideExisting,\n                        onchange: (value) => {\n                            this.overrideExisting = value;\n                        },\n                    },\n                    app.translator.trans(\n                        \"fof-linguist.admin.import.override-existing\",\n                    ),\n                ),\n            ]),\n            m(\n                \".Form-group\",\n                Button.component(\n                    {\n                        className: \"Button Button--primary\",\n                        onclick: () => {\n                            this.loading = true;\n\n                            app.request({\n                                method: \"POST\",\n                                url:\n                                    app.forum.attribute(\"apiUrl\") +\n                                    \"/fof/linguist/import\",\n                                body: {\n                                    input: this.input,\n                                    locale: this.locale,\n                                    ignoreExisting: !this.overrideExisting,\n                                },\n                            })\n                                .then((data) => {\n                                    this.loading = false;\n                                    m.redraw();\n\n                                    if (\n                                        confirm(\n                                            extractText(\n                                                app.translator.trans(\n                                                    this.overrideExisting\n                                                        ? \"fof-linguist.admin.import.results\"\n                                                        : \"fof-linguist.admin.import.results-with-ignore\",\n                                                    {\n                                                        imported:\n                                                            data.imported + \"\", // Cast to string to preserve zeros\n                                                        ignored:\n                                                            data.ignored + \"\",\n                                                        identical:\n                                                            data.identical + \"\",\n                                                    },\n                                                ),\n                                            ),\n                                        )\n                                    ) {\n                                        window.location.reload();\n                                    }\n                                })\n                                .catch((error) => {\n                                    this.loading = false;\n                                    m.redraw();\n                                    throw error;\n                                });\n                        },\n                        disabled: this.loading || !this.input,\n                        loading: this.loading,\n                    },\n                    app.translator.trans(\"fof-linguist.admin.import.submit\"),\n                ),\n            ),\n        ];\n    }\n}\n","import app from \"flarum/admin/app\";\nimport ExtensionPage from \"flarum/admin/components/ExtensionPage\";\nimport LoadingIndicator from \"flarum/common/components/LoadingIndicator\";\nimport StringsPage from \"./StringsPage\";\nimport CoveragePage from \"./CoveragePage\";\nimport ExportPage from \"./ExportPage\";\nimport ImportPage from \"./ImportPage\";\n\n/* global m */\n\nexport default class LinguistPage extends ExtensionPage {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.tab = \"strings\";\n        this.ready = false;\n        this.namespaces = []; // First level of translation keys. Usually an extension ID, but also core and validation\n        this.frontends = [\"forum\", \"admin\", \"lib\", \"ref\", \"api\"]; // Second level of translation keys: forum, admin, ...\n        this.initialBrowseFilters = {};\n\n        Promise.all([\n            app\n                .request({\n                    method: \"GET\",\n                    url:\n                        app.forum.attribute(\"apiUrl\") + \"/fof/linguist/strings\",\n                })\n                .then((result) => {\n                    app.store.pushPayload(result);\n                }),\n            app\n                .request({\n                    method: \"GET\",\n                    url:\n                        app.forum.attribute(\"apiUrl\") +\n                        \"/fof/linguist/string-keys\",\n                })\n                .then((result) => {\n                    const keys = app.store.pushPayload(result);\n\n                    const namespaces = [];\n\n                    keys.forEach((key) => {\n                        const parts = key.key().split(\".\");\n\n                        const namespace = parts[0];\n\n                        if (\n                            [\"core\", \"validation\"].indexOf(namespace) === -1 &&\n                            namespaces.indexOf(namespace) === -1\n                        ) {\n                            namespaces.push(namespace);\n                        }\n\n                        if (parts.length > 1 && namespace !== \"validation\") {\n                            const frontend = parts[1];\n\n                            if (this.frontends.indexOf(frontend) === -1) {\n                                this.frontends.push(frontend);\n                            }\n                        }\n                    });\n\n                    namespaces.sort();\n\n                    this.namespaces = [\n                        {\n                            namespace: \"core\",\n                        },\n                        {\n                            namespace: \"validation\",\n                        },\n                        ...namespaces.map((namespace) => {\n                            // First we look if the namespace matches an extension ID, that's the most common naming\n                            let extension = app.data.extensions[namespace];\n\n                            // If that's unsuccessful, we'll look if the full package name was used as namespace\n                            if (!extension) {\n                                extension = Object.values(\n                                    app.data.extensions,\n                                ).find((extension) => {\n                                    const packageNameWithDash =\n                                        extension.name.replace(\"/\", \"-\");\n\n                                    return namespace === packageNameWithDash;\n                                });\n                            }\n\n                            return {\n                                namespace,\n                                extension,\n                            };\n                        }),\n                    ];\n                }),\n        ]).then(() => {\n            this.ready = true;\n            m.redraw();\n        });\n    }\n\n    content() {\n        return m(\n            \".ExtensionPage-settings\",\n            m(\".container\", [this.contentTab()]),\n        );\n    }\n\n    infoItems() {\n        const items = super.infoItems();\n\n        items.add(\n            \"linguist-tabs\",\n            m(\"ul.FoF-Linguist-Tabs\", [\n                m(\n                    \"li\",\n                    m(\n                        \"a\",\n                        {\n                            className: this.tab === \"strings\" ? \"active\" : \"\",\n                            onclick: () => {\n                                this.tab = \"strings\";\n                            },\n                        },\n                        app.translator.trans(\"fof-linguist.admin.tabs.strings\"),\n                    ),\n                ),\n                m(\n                    \"li\",\n                    m(\n                        \"a\",\n                        {\n                            className: this.tab === \"coverage\" ? \"active\" : \"\",\n                            onclick: () => {\n                                this.tab = \"coverage\";\n                            },\n                        },\n                        app.translator.trans(\n                            \"fof-linguist.admin.tabs.coverage\",\n                        ),\n                    ),\n                ),\n                m(\n                    \"li\",\n                    m(\n                        \"a\",\n                        {\n                            className: this.tab === \"export\" ? \"active\" : \"\",\n                            onclick: () => {\n                                this.tab = \"export\";\n                            },\n                        },\n                        app.translator.trans(\"fof-linguist.admin.tabs.export\"),\n                    ),\n                ),\n                m(\n                    \"li\",\n                    m(\n                        \"a\",\n                        {\n                            className: this.tab === \"import\" ? \"active\" : \"\",\n                            onclick: () => {\n                                this.tab = \"import\";\n                            },\n                        },\n                        app.translator.trans(\"fof-linguist.admin.tabs.import\"),\n                    ),\n                ),\n            ]),\n            100,\n        );\n\n        return items;\n    }\n\n    contentTab() {\n        if (!this.ready) {\n            return LoadingIndicator.component();\n        }\n\n        switch (this.tab) {\n            case \"strings\":\n                return m(StringsPage, {\n                    namespaces: this.namespaces,\n                    frontends: this.frontends,\n                    initialBrowseFilters: this.initialBrowseFilters,\n                });\n            case \"coverage\":\n                return m(CoveragePage, {\n                    namespaces: this.namespaces,\n                    frontends: this.frontends,\n                    browseWithFilters: (filters) => {\n                        this.initialBrowseFilters = filters;\n                        this.tab = \"strings\";\n                    },\n                });\n            case \"export\":\n                return m(ExportPage, {\n                    namespaces: this.namespaces,\n                });\n            case \"import\":\n                return m(ImportPage);\n        }\n\n        return null;\n    }\n}\n","import StringKey from \"./StringKey\";\nimport StringLocale from \"./StringLocale\";\n\nexport const components = {\n    StringKey,\n    StringLocale,\n};\n","import StringKey from \"./StringKey\";\nimport TextString from \"./TextString\";\n\nexport const models = {\n    StringKey,\n    TextString,\n};\n","import CoveragePage from \"./CoveragePage\";\nimport ExportPage from \"./ExportPage\";\nimport ImportPage from \"./ImportPage\";\nimport LinguistPage from \"./LinguistPage\";\nimport StringsPage from \"./StringsPage\";\n\nexport const pages = {\n    CoveragePage,\n    ExportPage,\n    ImportPage,\n    LinguistPage,\n    StringsPage,\n};\n","import booleanCheck from \"./booleanCheck\";\nimport frontendLabel from \"./frontendLabel\";\nimport highlightMithril from \"./highlightMithril\";\nimport localesAsArray from \"./localesAsArray\";\nimport namespaceLabel from \"./namespaceLabel\";\n\nexport const utils = {\n    booleanCheck,\n    frontendLabel,\n    highlightMithril,\n    localesAsArray,\n    namespaceLabel,\n};\n","import app from \"flarum/admin/app\";\nimport StringKey from \"./models/StringKey\";\nimport TextString from \"./models/TextString\";\nimport LinguistPage from \"./pages/LinguistPage\";\n\nexport * from \"./components\";\nexport * from \"./models\";\nexport * from \"./pages\";\nexport * from \"./utils\";\n\napp.initializers.add(\"fof-linguist\", (app) => {\n    app.store.models[\"fof-linguist-string-key\"] = StringKey;\n    app.store.models[\"fof-linguist-string\"] = TextString;\n\n    app.extensionData\n        .for(\"fof-linguist\")\n        .registerPage(LinguistPage)\n        .registerPermission(\n            {\n                icon: \"fas fa-italic\",\n                label: app.translator.trans(\n                    \"fof-linguist.admin.permissions.view_string_keys\",\n                ),\n                permission: \"viewStringKeys\",\n                allowGuest: true,\n            },\n            \"view\",\n        );\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","StringKey","_Model","_this","_len","arguments","length","args","Array","_key","apply","concat","Model","locales","TextString","locale","apiEndpoint","this","exists","data","id","englishFound","app","push","name","unshift","HIGHLIGHT_DELIMITER","string","highlight","lowercaseHighliht","toLowerCase","regex","RegExp","replace","split","map","text","m","StringLocale","_proto","oninit","vnode","stringKey","attrs","localeKey","originalString","all","find","dirty","processing","originalHasNewLine","keys","some","indexOf","inputType","view","_this2","placeholderText","trans","localeName","className","title","oninput","event","target","disabled","highlightMithril","actions","onchange","toArray","_this3","items","ItemList","add","Button","type","loading","onclick","saveString","deleteString","_this4","createRecord","attributes","save","then","redraw","err","_this5","_vnode$attrs","localesAsArray","namespace","translations","frontend","operation","booleans","reduce","b","StringsPage","numberOfResultsToShow","filters","assign","search","withOwnTranslations","missingTranslationsNegation","missingTranslationsType","missingTranslationsOperation","missingTranslationsInLocales","forExtension","initialBrowseFilters","results","applyFilters","slice","cacheClearInstructions","placeholder","icon","Dropdown","buttonClassName","label","namespaces","extension","extra","namespaceLabel","frontends","frontendLabel","stopPropagation","Select","options","without","with","any","original","own","or","and","filter","strings","getById","confirm","extractText","count","show","LoadingModal","Promise","window","location","reload","settings","shown","total","keysWithCustomTranslations","keysWithCustomTranslationsIn","forEach","lowercaseSearch","hasOriginalTranslation","booleanCheck","hasOwnTranslation","matchesType","parts","debugEnabled","Alert","dismissible","controls","method","url","attribute","CoveragePage","columns","showAllFrontends","totalPercent","firstNonEnglishLocale","visibleFrontends","browseWithFilters","localeCoverage","style","prefixCoverage","stringKeys","customCount","originalCount","specialStyle","percent","Math","round","translated","width","max","custom","ExportPage","includeOriginals","includeAll","output","fetchOutput","localeOptions","namespaceOptions","_all","Switch","state","LinkButton","href","exportUrl","external","download","readonly","rows","buildQueryString","extract","raw","JSON","stringify","error","ImportPage","overrideExisting","input","body","ignoreExisting","imported","ignored","identical","LinguistPage","_ExtensionPage","tab","ready","result","pushPayload","sort","extensions","values","packageNameWithDash","content","contentTab","infoItems","LoadingIndicator","ExtensionPage","components","models","pages","utils","store","extensionData","registerPage","registerPermission","translator","permission","allowGuest"],"sourceRoot":""}